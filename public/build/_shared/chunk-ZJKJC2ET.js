import{a as $,b as y,c as O,g as v,h as x,i as p}from"/build/_shared/chunk-SV3SHFZF.js";import{a as M}from"/build/_shared/chunk-SN2BHVXC.js";import{a as D}from"/build/_shared/chunk-653BTUZP.js";import{c as h}from"/build/_shared/chunk-W5DRAD4K.js";var e=h(D(),1);var H=h(D(),1);function S(r,t=globalThis?.document){let s=p(r);(0,H.useEffect)(()=>{let o=n=>{n.key==="Escape"&&s(n)};return t.addEventListener("keydown",o),()=>t.removeEventListener("keydown",o)},[s,t])}var g="dismissableLayer.update",j="dismissableLayer.pointerDownOutside",Q="dismissableLayer.focusOutside",q,F=(0,e.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Y=(0,e.forwardRef)((r,t)=>{var s;let{disableOutsidePointerEvents:o=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:b,onInteractOutside:d,onDismiss:u,...m}=r,c=(0,e.useContext)(F),[l,N]=(0,e.useState)(null),f=(s=l?.ownerDocument)!==null&&s!==void 0?s:globalThis?.document,[,W]=(0,e.useState)({}),_=O(t,i=>N(i)),C=Array.from(c.layers),[K]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),U=C.indexOf(K),L=l?C.indexOf(l):-1,X=c.layersWithOutsidePointerEventsDisabled.size>0,T=L>=U,z=J(i=>{let E=i.target,R=[...c.branches].some(P=>P.contains(E));!T||R||(a?.(i),d?.(i),i.defaultPrevented||u?.())},f),k=V(i=>{let E=i.target;[...c.branches].some(P=>P.contains(E))||(b?.(i),d?.(i),i.defaultPrevented||u?.())},f);return S(i=>{L===c.layers.size-1&&(n?.(i),!i.defaultPrevented&&u&&(i.preventDefault(),u()))},f),(0,e.useEffect)(()=>{if(l)return o&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(q=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(l)),c.layers.add(l),B(),()=>{o&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=q)}},[l,f,o,c]),(0,e.useEffect)(()=>()=>{l&&(c.layers.delete(l),c.layersWithOutsidePointerEventsDisabled.delete(l),B())},[l,c]),(0,e.useEffect)(()=>{let i=()=>W({});return document.addEventListener(g,i),()=>document.removeEventListener(g,i)},[]),(0,e.createElement)(v.div,$({},m,{ref:_,style:{pointerEvents:X?T?"auto":"none":void 0,...r.style},onFocusCapture:y(r.onFocusCapture,k.onFocusCapture),onBlurCapture:y(r.onBlurCapture,k.onBlurCapture),onPointerDownCapture:y(r.onPointerDownCapture,z.onPointerDownCapture)}))});var G=(0,e.forwardRef)((r,t)=>{let s=(0,e.useContext)(F),o=(0,e.useRef)(null),n=O(t,o);return(0,e.useEffect)(()=>{let a=o.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),(0,e.createElement)(v.div,$({},r,{ref:n}))});function J(r,t=globalThis?.document){let s=p(r),o=(0,e.useRef)(!1),n=(0,e.useRef)(()=>{});return(0,e.useEffect)(()=>{let a=d=>{if(d.target&&!o.current){let m=function(){I(j,s,u,{discrete:!0})},u={originalEvent:d};d.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=m,t.addEventListener("click",n.current,{once:!0})):m()}else t.removeEventListener("click",n.current);o.current=!1},b=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(b),t.removeEventListener("pointerdown",a),t.removeEventListener("click",n.current)}},[t,s]),{onPointerDownCapture:()=>o.current=!0}}function V(r,t=globalThis?.document){let s=p(r),o=(0,e.useRef)(!1);return(0,e.useEffect)(()=>{let n=a=>{a.target&&!o.current&&I(Q,s,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,s]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function B(){let r=new CustomEvent(g);document.dispatchEvent(r)}function I(r,t,s,{discrete:o}){let n=s.originalEvent.target,a=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:s});t&&n.addEventListener(r,t,{once:!0}),o?x(n,a):n.dispatchEvent(a)}var ae=Y,ce=G;var w=h(D(),1),A=h(M(),1);var fe=(0,w.forwardRef)((r,t)=>{var s;let{container:o=globalThis==null||(s=globalThis.document)===null||s===void 0?void 0:s.body,...n}=r;return o?A.default.createPortal((0,w.createElement)(v.div,$({},n,{ref:t})),o):null});export{Y as a,ae as b,ce as c,fe as d};
