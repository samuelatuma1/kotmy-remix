import{a as st}from"/build/_shared/chunk-653BTUZP.js";import{c as ot}from"/build/_shared/chunk-W5DRAD4K.js";function V(t){return"init"in t}function L(t){return!!t.write}function z(t){return"v"in t||"e"in t}function I(t){if("e"in t)throw t.e;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v}var N=new WeakMap;function F(t){var e;return T(t)&&!!((e=N.get(t))!=null&&e[0])}function rt(t){let e=N.get(t);e?.[0]&&(e[0]=!1,e[1].forEach(o=>o()))}function D(t,e){let o=N.get(t);if(!o){o=[!0,new Set],N.set(t,o);let n=()=>{o[0]=!1};t.then(n,n)}o[1].add(e)}function T(t){return typeof t?.then=="function"}function J(t,e,o){if(!o.p.has(t)){o.p.add(t);let n=()=>o.p.delete(t);e.then(n,n)}}function j(t,e,o){var n;let s=new Set;for(let r of((n=o.get(t))==null?void 0:n.t)||[])o.has(r)&&s.add(r);for(let r of e.p)s.add(r);return s}var it=(t,e,...o)=>e.read(...o),ct=(t,e,...o)=>e.write(...o),at=(t,e)=>{var o;return(o=e.unstable_onInit)==null?void 0:o.call(e,t)},lt=(t,e,o)=>{var n;return(n=e.onMount)==null?void 0:n.call(e,o)},ut=(t,e)=>{let o=A(t),n=o[0],s=o[9];if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!e)throw new Error("Atom is undefined or null");let r=n.get(e);return r||(r={d:new Map,p:new Set,n:0},n.set(e,r),s?.(t,e)),r},dt=t=>{let e=A(t),o=e[1],n=e[3],s=e[4],r=e[5],i=e[6],g=e[13],f=[],c=a=>{try{a()}catch(u){f.push(u)}};do{i.f&&c(i.f);let a=new Set,u=a.add.bind(a);n.forEach(d=>{var m;return(m=o.get(d))==null?void 0:m.l.forEach(u)}),n.clear(),r.forEach(u),r.clear(),s.forEach(u),s.clear(),a.forEach(c),n.size&&g(t)}while(n.size||r.size||s.size);if(f.length)throw new AggregateError(f)},ft=t=>{let e=A(t),o=e[1],n=e[2],s=e[3],r=e[11],i=e[14],g=e[17],f=[],c=new WeakSet,a=new WeakSet,u=Array.from(s);for(;u.length;){let d=u[u.length-1],m=r(t,d);if(a.has(d)){u.pop();continue}if(c.has(d)){if(n.get(d)===m.n)f.push([d,m]);else if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&n.has(d))throw new Error("[Bug] invalidated atom exists");a.add(d),u.pop();continue}c.add(d);for(let v of j(d,m,o))c.has(v)||u.push(v)}for(let d=f.length-1;d>=0;--d){let[m,v]=f[d],h=!1;for(let l of v.d.keys())if(l!==m&&s.has(l)){h=!0;break}h&&(i(t,m),g(t,m)),n.delete(m)}},mt=(t,e)=>{var o,n;let s=A(t),r=s[1],i=s[2],g=s[3],f=s[6],c=s[7],a=s[11],u=s[12],d=s[13],m=s[14],v=s[16],h=s[17],l=a(t,e);if(z(l)&&(r.has(e)&&i.get(e)!==l.n||Array.from(l.d).every(([S,M])=>m(t,S).n===M)))return l;l.d.clear();let k=!0;function b(){r.has(e)&&(h(t,e),d(t),u(t))}function E(S){var M;if(S===e){let U=a(t,S);if(!z(U))if(V(S))R(t,S,S.init);else throw new Error("no atom init");return I(U)}let O=m(t,S);try{return I(O)}finally{l.d.set(S,O.n),F(l.v)&&J(e,l.v,O),(M=r.get(S))==null||M.t.add(e),k||b()}}let _,w,nt={get signal(){return _||(_=new AbortController),_.signal},get setSelf(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!L(e)&&console.warn("setSelf function cannot be used with read-only atom"),!w&&L(e)&&(w=(...S)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&k&&console.warn("setSelf function cannot be called in sync"),!k)try{return v(t,e,...S)}finally{d(t),u(t)}}),w}},W=l.n;try{let S=c(t,e,E,nt);return R(t,e,S),T(S)&&(D(S,()=>_?.abort()),S.then(b,b)),(o=f.r)==null||o.call(f,e),l}catch(S){return delete l.v,l.e=S,++l.n,l}finally{k=!1,W!==l.n&&i.get(e)===W&&(i.set(e,l.n),g.add(e),(n=f.c)==null||n.call(f,e))}},gt=(t,e)=>{let o=A(t),n=o[1],s=o[2],r=o[11],i=[e];for(;i.length;){let g=i.pop(),f=r(t,g);for(let c of j(g,f,n)){let a=r(t,c);s.set(c,a.n),i.push(c)}}},H=(t,e,...o)=>{let n=A(t),s=n[3],r=n[6],i=n[8],g=n[11],f=n[12],c=n[13],a=n[14],u=n[15],d=n[17],m=!0,v=l=>I(a(t,l)),h=(l,...k)=>{var b;let E=g(t,l);try{if(l===e){if(!V(l))throw new Error("atom not writable");let _=E.n,w=k[0];R(t,l,w),d(t,l),_!==E.n&&(s.add(l),(b=r.c)==null||b.call(r,l),u(t,l));return}else return H(t,l,...k)}finally{m||(c(t),f(t))}};try{return i(t,e,v,h,...o)}finally{m=!1}},vt=(t,e)=>{var o;let n=A(t),s=n[1],r=n[3],i=n[6],g=n[11],f=n[15],c=n[18],a=n[19],u=g(t,e),d=s.get(e);if(d&&!F(u.v)){for(let[m,v]of u.d)if(!d.d.has(m)){let h=g(t,m);c(t,m).t.add(e),d.d.add(m),v!==h.n&&(r.add(m),(o=i.c)==null||o.call(i,m),f(t,m))}for(let m of d.d||[])if(!u.d.has(m)){d.d.delete(m);let v=a(t,m);v?.t.delete(e)}}},G=(t,e)=>{var o;let n=A(t),s=n[1],r=n[4],i=n[6],g=n[10],f=n[11],c=n[12],a=n[13],u=n[14],d=n[16],m=f(t,e),v=s.get(e);if(!v){u(t,e);for(let h of m.d.keys())G(t,h).t.add(e);if(v={l:new Set,d:new Set(m.d.keys()),t:new Set},s.set(e,v),(o=i.m)==null||o.call(i,e),L(e)){let h=()=>{let l=!0,k=(...b)=>{try{return d(t,e,...b)}finally{l||(a(t),c(t))}};try{let b=g(t,e,k);b&&(v.u=()=>{l=!0;try{b()}finally{l=!1}})}finally{l=!1}};r.add(h)}}return v},St=(t,e)=>{var o;let n=A(t),s=n[1],r=n[5],i=n[6],g=n[11],f=n[19],c=g(t,e),a=s.get(e);if(a&&!a.l.size&&!Array.from(a.t).some(u=>{var d;return(d=s.get(u))==null?void 0:d.d.has(e)})){a.u&&r.add(a.u),a=void 0,s.delete(e),(o=i.u)==null||o.call(i,e);for(let u of c.d.keys()){let d=f(t,u);d?.t.delete(e)}return}return a},R=(t,e,o)=>{let n=A(t)[11],s=n(t,e),r="v"in s,i=s.v;if(T(o))for(let g of s.d.keys())J(e,o,n(t,g));s.v=o,delete s.e,(!r||!Object.is(i,s.v))&&(++s.n,T(i)&&rt(i))},pt=(t,e)=>{let o=A(t)[14];return I(o(t,e))},At=(t,e,...o)=>{let n=A(t),s=n[12],r=n[13],i=n[16];try{return i(t,e,...o)}finally{r(t),s(t)}},ht=(t,e,o)=>{let n=A(t),s=n[12],r=n[18],i=n[19],f=r(t,e).l;return f.add(o),s(t),()=>{f.delete(o),i(t,e),s(t)}},$=new WeakMap,A=t=>{let e=$.get(t);if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!e)throw new Error("Store must be created by buildStore to read its building blocks");return e};function q(...t){let e={get(n){let s=A(e)[21];return s(e,n)},set(n,...s){let r=A(e)[22];return r(e,n,...s)},sub(n,s){let r=A(e)[23];return r(e,n,s)}},o=[new WeakMap,new WeakMap,new WeakMap,new Set,new Set,new Set,{},it,ct,at,lt,ut,dt,ft,mt,gt,H,vt,G,St,R,pt,At,ht,void 0].map((n,s)=>t[s]||n);return $.set(e,Object.freeze(o)),e}var bt=0;function B(t,e){let o=`atom${++bt}`,n={toString(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&this.debugLabel?o+":"+this.debugLabel:o}};return typeof t=="function"?n.read=t:(n.init=t,n.read=kt,n.write=_t),e&&(n.write=e),n}function kt(t){return t(this)}function _t(t,e,o){return e(this,typeof o=="function"?o(t(this)):o)}var K;function Q(){return K?K():q()}var y;function X(){return y||(y=Q(),(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=y),globalThis.__JOTAI_DEFAULT_STORE__!==y&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),y}var p=ot(st(),1);var wt=(0,p.createContext)(void 0);function Z(t){let e=(0,p.useContext)(wt);return t?.store||e||X()}var C=t=>typeof t?.then=="function",x=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},yt=p.default.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(x(t),t)}),P=new WeakMap,Y=(t,e)=>{let o=P.get(t);return o||(o=new Promise((n,s)=>{let r=t,i=c=>a=>{r===c&&n(a)},g=c=>a=>{r===c&&s(a)},f=()=>{try{let c=e();C(c)?(P.set(c,o),r=c,c.then(i(c),g(c)),D(c,f)):n(c)}catch(c){s(c)}};t.then(i(t),g(t)),D(t,f)}),P.set(t,o)),o};function Et(t,e){let{delay:o,unstable_promiseStatus:n=!p.default.use}=e||{},s=Z(e),[[r,i,g],f]=(0,p.useReducer)(a=>{let u=s.get(t);return Object.is(a[0],u)&&a[1]===s&&a[2]===t?a:[u,s,t]},void 0,()=>[s.get(t),s,t]),c=r;if((i!==s||g!==t)&&(f(),c=s.get(t)),(0,p.useEffect)(()=>{let a=s.sub(t,()=>{if(n)try{let u=s.get(t);C(u)&&x(Y(u,()=>s.get(t)))}catch{}if(typeof o=="number"){setTimeout(f,o);return}f()});return f(),a},[s,t,o,n]),(0,p.useDebugValue)(c),C(c)){let a=Y(c,()=>s.get(t));return n&&x(a),yt(a)}return c}function Mt(t,e){let o=Z(e);return(0,p.useCallback)((...s)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return o.set(t,...s)},[o,t])}function tt(t,e){return[Et(t,e),Mt(t,e)]}var It=B(null);var et=B(null);var zt=()=>{let[t,e]=tt(et);return{setUserStoreManager:(r,i)=>(e(r),i&&r&&(localStorage.setItem("atom_user",JSON.stringify(r)),console.log("persisted",r)),r),getUserStoreManager:()=>{if(!t){let r=localStorage.getItem("atom_user");if(r){let i=JSON.parse(r);return e(i),i}}return t},deleteUserStoreManager:()=>{e(null),localStorage.removeItem("atom_user")}}};export{zt as a};
