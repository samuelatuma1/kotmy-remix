import{a as ce}from"/build/_shared/chunk-PSEPMHEO.js";import{c as de}from"/build/_shared/chunk-FXXDJ2XE.js";import{a as me}from"/build/_shared/chunk-7WQOGNXA.js";import{a as le}from"/build/_shared/chunk-XD6DEJZE.js";import{a as j}from"/build/_shared/chunk-XLO4HCR6.js";import{a as re}from"/build/_shared/chunk-MPFSB7BL.js";import{b as ie}from"/build/_shared/chunk-XG4ZIYWV.js";import{b as P}from"/build/_shared/chunk-6Y722YOL.js";import{a as L}from"/build/_shared/chunk-IWGJOQMS.js";import{a as T}from"/build/_shared/chunk-OOBZAV5T.js";import{a as y,b as w,c as S,d as C,e as h}from"/build/_shared/chunk-BI2ASFVQ.js";import{b as te,c as ae,d as se,j as v}from"/build/_shared/chunk-NNNROOR6.js";import{a as b}from"/build/_shared/chunk-DU3ERRUZ.js";import{a as I}from"/build/_shared/chunk-EQOSR4CK.js";import{a as ve}from"/build/_shared/chunk-PCPGSTDU.js";import{a as oe}from"/build/_shared/chunk-IXKRAC64.js";import{a as ne,b as $}from"/build/_shared/chunk-7ERNTC7H.js";import{a as xe}from"/build/_shared/chunk-OS2L5QU2.js";import{a as be}from"/build/_shared/chunk-74OT6ATM.js";import{c as Y,d as Z,h as H,i as J,j as ue,l as R,m as K,r as Q,s as X,t as ee}from"/build/_shared/chunk-SN2BHVXC.js";import{a as W,b as p}from"/build/_shared/chunk-653BTUZP.js";import{c as i}from"/build/_shared/chunk-W5DRAD4K.js";var he=i(be(),1);var M=i(ve(),1),Ne=i(xe(),1);ue();var pe=i(W(),1);var c=i(p(),1),D=pe.default.forwardRef(function({type:o,url:d,className:g="",...m},u){let l=d?{element:"link",to:d,...m}:{element:"button",ref:u,...m},f=ee();return o==="kotmy"?(0,c.jsxs)(f.Form,{method:"POST",children:[(0,c.jsx)("input",{type:"hidden",name:"contestant_id",value:m.contestantId}),(0,c.jsx)("input",{type:"hidden",name:"stage_id",value:m.stageId}),(0,c.jsxs)(L,{element:"button",name:"intent",value:"kotmy_vote",variant:"outline",className:I("p-2 flex items-center border rounded-full w-full",g),children:[(0,c.jsx)("span",{className:I("w-6 h-6 flex items-center justify-center rounded-full p-1"),children:(0,c.jsx)($,{src:P[o]})}),(0,c.jsxs)("span",{className:"grow text-xs font-bold text-center mr-2",children:[m.voted?null:(0,c.jsx)("span",{className:"capitalize",children:o}),m.voted?"Voted":" vote"]})]})]}):(0,c.jsxs)(L,{...l,variant:"outline",className:I("p-2 flex items-center border rounded-full",{"border-facebook text-facebook bg-facebookBG hover:bg-facebook/15":o==="facebook","border-instagram text-instagram bg-instagramBG hover:bg-instagram/15":o==="instagram","border-twitter text-twitter bg-twitterBG hover:bg-twitter/15":o==="twitter","border-tally text-tally bg-tallyBG hover:bg-tally/15":o==="tally","border-givaah text-givaah bg-givaahBG hover:bg-givaah/15":o==="givaah"},g),children:[(0,c.jsx)("span",{className:I("w-6 h-6 flex items-center justify-center rounded-full p-1",{"bg-facebook":o==="facebook","bg-instagram":o==="instagram","bg-twitter":o==="twitter","bg-tally":o==="tally","bg-givaah":o==="givaah"}),children:(0,c.jsx)($,{src:P[o]})}),(0,c.jsxs)("span",{className:"grow text-xs font-bold text-center mr-2",children:[(0,c.jsx)("span",{className:"capitalize",children:o})," vote"]})]})});var ge=i(W(),1),t=i(p(),1);function Le({contestant:e}){let[o,d]=(0,ge.useState)(g(e));function g(F){if(F.originalContestantData?.result?.total_votes>0)return F.originalContestantData.result.total_votes;let U=0;return Object.entries(F.originalContestantData.vote).forEach(([we,q])=>{typeof q=="number"&&(U+=q)}),U}let{fullName:m,contestName:u,stage:l,stageStatus:f,contestImage:O,is_evicted:k,originalContestantData:x,stageSocialMedia:fe}=e,_=x.vote,N=x.result;return console.log(e),(0,t.jsxs)("article",{className:"border-2 border-primary rounded-3xl overflow-hidden",children:[(0,t.jsx)(R,{to:`/contest/contestant/${x._id}?stageId=${x.stage_id}&contestantCode=${x.code}`,children:(0,t.jsx)("img",{src:x.image_url||v,alt:m,className:"w-full h-80 object-cover object-top"})}),(0,t.jsxs)("div",{className:"p-4 bg-secondary",children:[(0,t.jsx)("span",{className:"block font-black uppercase mb-2",children:m}),(0,t.jsx)("span",{className:"block text-[#5F6D7E] text-sm font-medium mb-2",children:u}),(0,t.jsxs)("span",{className:"block text-[#5F6D7E] text-xs font-medium mb-2",children:["Stage ",l," \u2022 ",f.replace(/_/g," ")]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Total Votes"}),(0,t.jsx)("div",{className:"text-xl font-bold text-indigo-700",children:o})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Rank"}),(0,t.jsx)("div",{className:"text-xl font-bold text-green-700",children:x.rank??"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Grade"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-gray-800",children:N?.grade??"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Vote %"}),(0,t.jsxs)("div",{className:"text-lg font-semibold text-blue-600",children:[N?.overall_vote_percentage??0,"%"]})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("span",{className:"block text-xs text-gray-500 mb-1",children:"Votes by Channel"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs font-semibold capitalize",children:fe}),(0,t.jsx)("span",{className:"text-sm font-bold",children:_.social_media})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs font-semibold",children:"Tally"}),(0,t.jsx)("span",{className:"text-sm font-bold",children:_.tally??N?.weighted_scores?.tally??0})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs font-semibold",children:"Judge"}),(0,t.jsx)("span",{className:"text-sm font-bold",children:_.judge??N?.weighted_scores?.judge??0})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs font-semibold",children:"Givaah"}),(0,t.jsx)("span",{className:"text-sm font-bold",children:_.givaah??N?.weighted_scores?.givaah??0})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs font-semibold",children:"Bonus"}),(0,t.jsx)("span",{className:"text-sm font-bold",children:_.bonus??N?.weighted_scores?.bonus??0})]})]})]}),(0,t.jsx)("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-bold ${k?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:k?"Evicted":"Active"})]})]})}function V({contestant:e,socialMedia:o}){let d=`${e.contestant_biodata.first_name} ${e.contestant_biodata.last_name}`;return console.log({contestant:e}),(0,t.jsxs)("article",{className:"border-2 border-primary rounded-3xl overflow-hidden",children:[(0,t.jsx)(R,{to:`/contest/contestant/${e._id}?stageId=${e.stage_id}&contestantCode=${e.code}`,children:(0,t.jsx)("img",{src:e.image_url||v,alt:"person smiling",className:"w-full h-80 object-cover object-top"})}),(0,t.jsxs)("div",{className:"p-4 bg-secondary",children:[(0,t.jsx)("span",{className:"block text-[#5F6D7E] text-sm font-medium mb-2",children:"Vote now for your favorite contestant"}),(0,t.jsx)("span",{className:"block font-black uppercase mb-4",children:d}),(0,t.jsx)("span",{className:"block text-[#5F6D7E] text-sm font-medium mb-2",children:e.category}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[o==="kotmy"?(0,t.jsx)(D,{type:o,url:e.social_media_url,voted:e.result.device_voted_for_contestant,contestantId:e._id,stageId:e.stage_id}):(0,t.jsx)(D,{type:o,url:e.social_media_url,voted:e.result.device_voted_for_contestant}),(0,t.jsx)(ie,{contestant:e,children:(0,t.jsx)(D,{type:"tally",className:"w-full"})})]})]})]})}var s=i(p(),1);function A({contest:e,stage:o}){let[d,g]=J(),m=e.status,u=m==="ongoing"?"green":m==="completed"?"red":"gray";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("header",{className:"wrapper my-16 grid md:grid-cols-2 justify-between gap-6 md:gap-8",children:[(0,s.jsxs)("div",{className:"grid",children:[(0,s.jsxs)("div",{className:"max-w-2xl",children:[(0,s.jsx)("h1",{className:"text-accent text-2xl lg:text-4xl font-satoshi-black max-w-3xl mb-3 uppercase",children:e.name}),(0,s.jsx)("p",{className:"font-satoshi-medium",children:e.desc})]}),(0,s.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-2 max-w-4xl",children:[(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("span",{className:"block font-satoshi-bold mb-1",children:"Status"}),(0,s.jsx)(oe,{status:m,color:u})]}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("span",{className:"block font-satoshi-bold mb-1",children:"Categories"}),(0,s.jsx)("div",{className:"flex gap-4 flex-wrap capitalize",children:e.categories.map(l=>(0,s.jsxs)("span",{children:["~ ",l]},l))})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("span",{className:"block font-satoshi-bold mb-1",children:"Prizes"}),(0,s.jsx)("span",{className:"block",children:e.prizes})]})]}),(0,s.jsx)(T,{deadline:new Date(e.end_date),title:"contest ends in"})]}),(0,s.jsx)("img",{src:e.image||v,alt:"kid smiling",className:"w-full rounded-3xl h-[350px] object-cover"})]}),(0,s.jsxs)("section",{className:"wrapper my-16",children:[(0,s.jsxs)("h2",{className:"text-accent text-lg lg:text-2xl font-satoshi-bold mb-3 sm:mb-6 uppercase",children:[e.name," contestants"]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-end gap-6 sm:gap-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)(b,{as:"input",type:"search",className:"min-w-[280px] bg-white py-2 text-sm",placeholder:"Search contestant by name"}),(0,s.jsxs)(y,{value:String(o?.stage),onValueChange:l=>g(f=>(f.set("stage",l),f)),children:[(0,s.jsx)(S,{className:"sm:w-[180px] h-auto rounded-lg shadow-none bg-white hover:border-accent",children:(0,s.jsx)(w,{placeholder:"Stage 1"})}),(0,s.jsx)(C,{children:e.stages.map(l=>(0,s.jsxs)(h,{value:String(l.stage),className:"focus:bg-blue-700/25",children:["Stage ",l.stage]},l.stage))})]})]}),(0,s.jsx)(H,{to:`scoreboard?${d.toString()}`,className:"w-fit text-accent font-bold hover:underline underline-offset-4",children:"See scoreboard"})]}),(0,s.jsx)("div",{className:"my-16 grid sm:grid-cols-2 xl:grid-cols-3 gap-x-12 gap-y-16",children:o?.contestants.map(l=>(0,s.jsx)(V,{contestant:l,socialMedia:o.rates.social_media.type},l.code))})]})]})}var n=i(p(),1);function B({contestant:e,contest:o}){let d=`${e.contestant_biodata.first_name} ${e.contestant_biodata.last_name}`,g=new Date(e.contestant_biodata.dob).toDateString();return(0,n.jsxs)("div",{className:"bg-secondary p-10 sm:rounded-3xl flex flex-col max-w-xl gap-10",children:[(0,n.jsxs)("aside",{className:"border-2 border-success-700 bg-success-500 rounded-xl p-6 flex items-start gap-4",children:[(0,n.jsx)("img",{src:ne.alertCheckIcon,width:30,height:30,className:"mt-1"}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"block font-bold mb-2",children:"Dear Esteemed Contestant/Guardian"}),(0,n.jsxs)("span",{className:"font-medium",children:["Congratulations, ",d,"! Your submission to ",o.name," has been received successfully. Your code is ",(0,n.jsx)("span",{className:"font-semibold",children:e.code}),"."]})]})]}),(0,n.jsxs)("div",{className:"grid sm:grid-cols-2 justify-between gap-6 sm:gap-10",children:[(0,n.jsx)("img",{src:e.image_url,alt:"kid smiling",className:"rounded-3xl"}),(0,n.jsxs)("div",{className:"grid gap-1 leading-tight",children:[(0,n.jsxs)("p",{className:"",children:[(0,n.jsx)("span",{className:"block font-satoshi-bold",children:"Full Name"}),(0,n.jsx)("span",{className:"block capitalize",children:d})]}),(0,n.jsxs)("p",{className:"",children:[(0,n.jsx)("span",{className:"block font-satoshi-bold",children:"Date of Birth"}),(0,n.jsx)("span",{className:"block",children:g})]}),(0,n.jsxs)("p",{className:"",children:[(0,n.jsx)("span",{className:"block font-satoshi-bold",children:"Gender"}),(0,n.jsx)("span",{className:"block capitalize",children:e.contestant_biodata.sex.toLowerCase()})]}),(0,n.jsxs)("p",{className:"min-w-0",children:[(0,n.jsx)("span",{className:"block font-satoshi-bold",children:"Email Address"}),(0,n.jsx)("span",{className:"block truncate ...",children:e.contestant_biodata.email})]}),(0,n.jsxs)("p",{className:"",children:[(0,n.jsx)("span",{className:"block font-satoshi-bold",children:"State of Residence"}),(0,n.jsx)("span",{className:"block capitalize",children:e.contestant_biodata.state_of_residence})]})]})]})]})}var a=i(p(),1);function G({contest:e}){let{setUserStoreManager:o,getUserStoreManager:d}=ce(),g=Z(),m=d(),u=Y();if(!m){let l=u.pathname,f=u.search,O=u.hash,k=l+f+O;return(0,a.jsxs)("div",{className:"w-full max-w-xl bg-white border rounded-3xl shadow-lg flex flex-col items-center justify-center gap-6 py-12 px-6 sm:px-12 text-center",children:[(0,a.jsx)("svg",{width:"64",height:"64",fill:"none",viewBox:"0 0 24 24",className:"mx-auto mb-2 text-accent",children:(0,a.jsx)("path",{d:"M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10Zm0 2c-4.418 0-8 2.239-8 5v1a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1c0-2.761-3.582-5-8-5Z",fill:"currentColor"})}),(0,a.jsx)("h2",{className:"text-2xl font-satoshi-bold text-accent",children:"Sign In Required"}),(0,a.jsx)("p",{className:"text-gray-700 text-base max-w-md",children:"You must be signed in to register for this contest. Please sign in to continue and unlock the registration form."}),(0,a.jsx)(j,{element:"button",onClick:()=>g(`/login?redirectTo=${encodeURIComponent(k)}`),className:"mt-2 px-8 py-3 text-lg rounded-lg font-bold bg-accent text-white hover:bg-accent/90 transition",children:"Sign In"}),(0,a.jsxs)("p",{className:"text-sm text-gray-400 mt-2",children:["Don't have an account? ",(0,a.jsx)("span",{className:"underline text-accent cursor-pointer",onClick:()=>g(`/signup?redirectTo=${encodeURIComponent(k)}`),children:"Sign up here"})]})]})}return(0,a.jsxs)(K,{method:"POST",encType:"multipart/form-data",className:"bg-secondary p-[5%] sm:p-10 sm:rounded-3xl flex flex-col w-full max-w-xl gap-6",children:[(0,a.jsx)("p",{className:"text-2xl font-satoshi-bold",children:'Participate by filling in your basic information below and clicking "Submit".'}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsx)(b,{as:"input",labelText:"First Name",id:"first_name",name:"first_name",placeholder:"Enter your first name",required:!0}),(0,a.jsx)(b,{as:"input",labelText:"Last Name",id:"last_name",name:"last_name",placeholder:"Enter your last name",required:!0})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsx)(b,{as:"input",labelText:"Email Address",id:"email",name:"email",value:`${m?.email}`,readOnly:!0,placeholder:"Enter your email address",required:!0}),(0,a.jsx)(b,{as:"input",type:"date",labelText:"Date of Birth",id:"dob",name:"dob",placeholder:"dd/mm/yyyy",max:new Date().toISOString().split("T")[0],required:!0})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsxs)("label",{htmlFor:"gender",className:"font-bold flex flex-col",children:["Gender",(0,a.jsxs)(y,{name:"sex",required:!0,children:[(0,a.jsx)(S,{className:"h-10 font-normal rounded-lg shadow-none hover:border-accent",children:(0,a.jsx)(w,{placeholder:"Gender"})}),(0,a.jsxs)(C,{children:[(0,a.jsx)(h,{value:"MALE",className:"focus:bg-blue-700/25",children:"Male"}),(0,a.jsx)(h,{value:"FEMALE",className:"focus:bg-blue-700/25",children:"Female"})]})]})]}),(0,a.jsxs)("label",{htmlFor:"state_of_residence",className:"font-bold flex flex-col",children:["State of Residence",(0,a.jsxs)(y,{name:"state_of_residence",required:!0,children:[(0,a.jsx)(S,{className:"h-10 font-normal rounded-lg shadow-none hover:border-accent",children:(0,a.jsx)(w,{placeholder:"Select a state"})}),(0,a.jsx)(C,{children:Object.entries(re).map(([l,f])=>(0,a.jsx)(h,{value:l,className:"focus:bg-blue-700/25",children:f},l))})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsx)(b,{as:"input",type:"tel",labelText:"Whatsapp Number",id:"whatsapp_no",name:"whatsapp_no",placeholder:"Enter your whatsapp number",required:!0}),(0,a.jsxs)("label",{htmlFor:"category",className:"font-bold flex flex-col",children:["Category",(0,a.jsxs)(y,{name:"category",required:!!e.categories.length,children:[(0,a.jsx)(S,{className:"h-10 font-normal rounded-lg shadow-none hover:border-accent",children:(0,a.jsx)(w,{placeholder:"Select a category"})}),(0,a.jsx)(C,{children:e.categories.map(l=>(0,a.jsx)(h,{value:l,className:"focus:bg-blue-700/25",children:l},l))})]})]}),(0,a.jsx)(b,{as:"textarea",labelClassNames:"col-span-2",labelText:"What would you like your voters to know?",id:"info",name:"info",placeholder:""})]}),(0,a.jsx)(le,{labelText:"Upload Image",name:"contestant_image",multiple:!0,required:!0}),(0,a.jsx)("input",{type:"hidden",name:"contestId",value:e._id}),(0,a.jsx)(j,{element:"button",type:"submit",name:"intent",value:"register",className:"md:self-end",children:"Submit"})]})}var r=i(p(),1);function z({contest:e}){let o=X();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("header",{className:"wrapper my-16 grid md:grid-cols-2 justify-between gap-6 md:gap-8",children:[(0,r.jsxs)("div",{className:"flex flex-col justify-around",children:[(0,r.jsxs)("div",{className:"max-w-2xl",children:[(0,r.jsx)("h1",{className:"text-accent text-2xl lg:text-4xl font-satoshi-black max-w-3xl mb-3",children:e.name}),(0,r.jsx)("p",{className:"font-satoshi-medium",children:e.desc})]}),(0,r.jsx)(T,{deadline:new Date(e.reg_deadline),title:"registration ends in"})]}),(0,r.jsx)("img",{src:e.image||v,alt:"kid smiling",className:"w-full rounded-3xl h-[350px] object-cover"})]}),(0,r.jsx)("section",{className:"sm:wrapper my-16",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-6 sm:gap-8",children:[(0,r.jsx)(me,{contest:e}),o?.data?(0,r.jsx)(B,{contestant:o.data,contest:e}):(0,r.jsx)(G,{contest:e})]})}),(0,r.jsxs)("section",{className:"my-8 md:my-16",children:[(0,r.jsx)("h2",{className:"text-2xl sm:text-[40px] leading-snug font-satoshi-black w-4/5 max-w-lg text-center mx-auto my-10",children:"Over 500 registered participants and counting"}),(0,r.jsx)(de,{contestants:[{id:"sdjc",image:te},{id:"adcn",image:ae},{id:"kjsd",image:se}]})]})]})}var E=i(p(),1);function ye(){let e=Q("routes/_public.contests.$tournamentId.$contestId");if(!e)throw new Error("Could not load stage contestants");let{contest:o,stage:d}=e;return(0,E.jsx)("main",{className:"grow",children:o.status==="registering"?(0,E.jsx)(z,{contest:o}):(0,E.jsx)(A,{contest:o,stage:d})})}export{Le as a,V as b,ye as c};
