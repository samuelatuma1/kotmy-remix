import{c as re}from"/build/_shared/chunk-FXXDJ2XE.js";import{a as ne}from"/build/_shared/chunk-7WQOGNXA.js";import{a as se}from"/build/_shared/chunk-XD6DEJZE.js";import{a as ae}from"/build/_shared/chunk-XLO4HCR6.js";import{a as oe}from"/build/_shared/chunk-MPFSB7BL.js";import{b as le}from"/build/_shared/chunk-XG4ZIYWV.js";import{b as $}from"/build/_shared/chunk-6Y722YOL.js";import{a as L}from"/build/_shared/chunk-IWGJOQMS.js";import{a as I}from"/build/_shared/chunk-OOBZAV5T.js";import{a as h,b as y,c as w,d as S,e as x}from"/build/_shared/chunk-BI2ASFVQ.js";import{b as Q,c as X,d as Z,j as b}from"/build/_shared/chunk-NNNROOR6.js";import{a as g}from"/build/_shared/chunk-DU3ERRUZ.js";import{a as _}from"/build/_shared/chunk-EQOSR4CK.js";import{a as fe}from"/build/_shared/chunk-PCPGSTDU.js";import{a as ee}from"/build/_shared/chunk-IXKRAC64.js";import{a as te,b as R}from"/build/_shared/chunk-7ERNTC7H.js";import{a as ge}from"/build/_shared/chunk-OS2L5QU2.js";import{a as pe}from"/build/_shared/chunk-74OT6ATM.js";import{h as M,i as U,j as de,l as F,m as Y,r as H,s as J,t as K}from"/build/_shared/chunk-SN2BHVXC.js";import{a as q,b as d}from"/build/_shared/chunk-653BTUZP.js";import{c as r}from"/build/_shared/chunk-W5DRAD4K.js";var ue=r(pe(),1);var B=r(fe(),1),be=r(ge(),1);de();var ie=r(q(),1);var m=r(d(),1),T=ie.default.forwardRef(function({type:a,url:c,className:f="",...p},C){let i=c?{element:"link",to:c,...p}:{element:"button",ref:C,...p},v=K();return a==="kotmy"?(0,m.jsxs)(v.Form,{method:"POST",children:[(0,m.jsx)("input",{type:"hidden",name:"contestant_id",value:p.contestantId}),(0,m.jsx)("input",{type:"hidden",name:"stage_id",value:p.stageId}),(0,m.jsxs)(L,{element:"button",name:"intent",value:"kotmy_vote",variant:"outline",className:_("p-2 flex items-center border rounded-full w-full",f),children:[(0,m.jsx)("span",{className:_("w-6 h-6 flex items-center justify-center rounded-full p-1"),children:(0,m.jsx)(R,{src:$[a]})}),(0,m.jsxs)("span",{className:"grow text-xs font-bold text-center mr-2",children:[p.voted?null:(0,m.jsx)("span",{className:"capitalize",children:a}),p.voted?"Voted":" vote"]})]})]}):(0,m.jsxs)(L,{...i,variant:"outline",className:_("p-2 flex items-center border rounded-full",{"border-facebook text-facebook bg-facebookBG hover:bg-facebook/15":a==="facebook","border-instagram text-instagram bg-instagramBG hover:bg-instagram/15":a==="instagram","border-twitter text-twitter bg-twitterBG hover:bg-twitter/15":a==="twitter","border-tally text-tally bg-tallyBG hover:bg-tally/15":a==="tally","border-givaah text-givaah bg-givaahBG hover:bg-givaah/15":a==="givaah"},f),children:[(0,m.jsx)("span",{className:_("w-6 h-6 flex items-center justify-center rounded-full p-1",{"bg-facebook":a==="facebook","bg-instagram":a==="instagram","bg-twitter":a==="twitter","bg-tally":a==="tally","bg-givaah":a==="givaah"}),children:(0,m.jsx)(R,{src:$[a]})}),(0,m.jsxs)("span",{className:"grow text-xs font-bold text-center mr-2",children:[(0,m.jsx)("span",{className:"capitalize",children:a})," vote"]})]})});var me=r(q(),1),t=r(d(),1);function Ee({contestant:e}){let[a,c]=(0,me.useState)(f(e));function f(E){if(E.originalContestantData?.result?.total_votes>0)return E.originalContestantData.result.total_votes;let O=0;return Object.entries(E.originalContestantData.vote).forEach(([Ne,W])=>{typeof W=="number"&&(O+=W)}),O}let{fullName:p,contestName:C,stage:i,stageStatus:v,contestImage:ve,is_evicted:z,originalContestantData:u,stageSocialMedia:ce}=e,k=u.vote,N=u.result;return console.log(e),(0,t.jsxs)("article",{className:"border-2 border-primary rounded-3xl overflow-hidden",children:[(0,t.jsx)(F,{to:`/contest/contestant/${u._id}?stageId=${u.stage_id}&contestantCode=${u.code}`,children:(0,t.jsx)("img",{src:u.image_url||b,alt:p,className:"w-full h-80 object-cover object-top"})}),(0,t.jsxs)("div",{className:"p-4 bg-secondary",children:[(0,t.jsx)("span",{className:"block font-black uppercase mb-2",children:p}),(0,t.jsx)("span",{className:"block text-[#5F6D7E] text-sm font-medium mb-2",children:C}),(0,t.jsxs)("span",{className:"block text-[#5F6D7E] text-xs font-medium mb-2",children:["Stage ",i," \u2022 ",v.replace(/_/g," ")]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Total Votes"}),(0,t.jsx)("div",{className:"text-xl font-bold text-indigo-700",children:a})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Rank"}),(0,t.jsx)("div",{className:"text-xl font-bold text-green-700",children:u.rank??"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Grade"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-gray-800",children:N?.grade??"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Vote %"}),(0,t.jsxs)("div",{className:"text-lg font-semibold text-blue-600",children:[N?.overall_vote_percentage??0,"%"]})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("span",{className:"block text-xs text-gray-500 mb-1",children:"Votes by Channel"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs font-semibold capitalize",children:ce}),(0,t.jsx)("span",{className:"text-sm font-bold",children:k.social_media})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs font-semibold",children:"Tally"}),(0,t.jsx)("span",{className:"text-sm font-bold",children:k.tally??N?.weighted_scores?.tally??0})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs font-semibold",children:"Judge"}),(0,t.jsx)("span",{className:"text-sm font-bold",children:k.judge??N?.weighted_scores?.judge??0})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs font-semibold",children:"Givaah"}),(0,t.jsx)("span",{className:"text-sm font-bold",children:k.givaah??N?.weighted_scores?.givaah??0})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs font-semibold",children:"Bonus"}),(0,t.jsx)("span",{className:"text-sm font-bold",children:k.bonus??N?.weighted_scores?.bonus??0})]})]})]}),(0,t.jsx)("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-bold ${z?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:z?"Evicted":"Active"})]})]})}function j({contestant:e,socialMedia:a}){let c=`${e.contestant_biodata.first_name} ${e.contestant_biodata.last_name}`;return console.log({contestant:e}),(0,t.jsxs)("article",{className:"border-2 border-primary rounded-3xl overflow-hidden",children:[(0,t.jsx)(F,{to:`/contest/contestant/${e._id}?stageId=${e.stage_id}&contestantCode=${e.code}`,children:(0,t.jsx)("img",{src:e.image_url||b,alt:"person smiling",className:"w-full h-80 object-cover object-top"})}),(0,t.jsxs)("div",{className:"p-4 bg-secondary",children:[(0,t.jsx)("span",{className:"block text-[#5F6D7E] text-sm font-medium mb-2",children:"Vote now for your favorite contestant"}),(0,t.jsx)("span",{className:"block font-black uppercase mb-4",children:c}),(0,t.jsx)("span",{className:"block text-[#5F6D7E] text-sm font-medium mb-2",children:e.category}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a==="kotmy"?(0,t.jsx)(T,{type:a,url:e.social_media_url,voted:e.result.device_voted_for_contestant,contestantId:e._id,stageId:e.stage_id}):(0,t.jsx)(T,{type:a,url:e.social_media_url,voted:e.result.device_voted_for_contestant}),(0,t.jsx)(le,{contestant:e,children:(0,t.jsx)(T,{type:"tally",className:"w-full"})})]})]})]})}var s=r(d(),1);function V({contest:e,stage:a}){let[c,f]=U(),p=e.status,C=p==="ongoing"?"green":p==="completed"?"red":"gray";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("header",{className:"wrapper my-16 grid md:grid-cols-2 justify-between gap-6 md:gap-8",children:[(0,s.jsxs)("div",{className:"grid",children:[(0,s.jsxs)("div",{className:"max-w-2xl",children:[(0,s.jsx)("h1",{className:"text-accent text-2xl lg:text-4xl font-satoshi-black max-w-3xl mb-3 uppercase",children:e.name}),(0,s.jsx)("p",{className:"font-satoshi-medium",children:e.desc})]}),(0,s.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-2 max-w-4xl",children:[(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("span",{className:"block font-satoshi-bold mb-1",children:"Status"}),(0,s.jsx)(ee,{status:p,color:C})]}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("span",{className:"block font-satoshi-bold mb-1",children:"Categories"}),(0,s.jsx)("div",{className:"flex gap-4 flex-wrap capitalize",children:e.categories.map(i=>(0,s.jsxs)("span",{children:["~ ",i]},i))})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("span",{className:"block font-satoshi-bold mb-1",children:"Prizes"}),(0,s.jsx)("span",{className:"block",children:e.prizes})]})]}),(0,s.jsx)(I,{deadline:new Date(e.end_date),title:"contest ends in"})]}),(0,s.jsx)("img",{src:e.image||b,alt:"kid smiling",className:"w-full rounded-3xl h-[350px] object-cover"})]}),(0,s.jsxs)("section",{className:"wrapper my-16",children:[(0,s.jsxs)("h2",{className:"text-accent text-lg lg:text-2xl font-satoshi-bold mb-3 sm:mb-6 uppercase",children:[e.name," contestants"]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-end gap-6 sm:gap-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)(g,{as:"input",type:"search",className:"min-w-[280px] bg-white py-2 text-sm",placeholder:"Search contestant by name"}),(0,s.jsxs)(h,{value:String(a?.stage),onValueChange:i=>f(v=>(v.set("stage",i),v)),children:[(0,s.jsx)(w,{className:"sm:w-[180px] h-auto rounded-lg shadow-none bg-white hover:border-accent",children:(0,s.jsx)(y,{placeholder:"Stage 1"})}),(0,s.jsx)(S,{children:e.stages.map(i=>(0,s.jsxs)(x,{value:String(i.stage),className:"focus:bg-blue-700/25",children:["Stage ",i.stage]},i.stage))})]})]}),(0,s.jsx)(M,{to:`scoreboard?${c.toString()}`,className:"w-fit text-accent font-bold hover:underline underline-offset-4",children:"See scoreboard"})]}),(0,s.jsx)("div",{className:"my-16 grid sm:grid-cols-2 xl:grid-cols-3 gap-x-12 gap-y-16",children:a?.contestants.map(i=>(0,s.jsx)(j,{contestant:i,socialMedia:a.rates.social_media.type},i.code))})]})]})}var l=r(d(),1);function A({contestant:e,contest:a}){let c=`${e.contestant_biodata.first_name} ${e.contestant_biodata.last_name}`,f=new Date(e.contestant_biodata.dob).toDateString();return(0,l.jsxs)("div",{className:"bg-secondary p-10 sm:rounded-3xl flex flex-col max-w-xl gap-10",children:[(0,l.jsxs)("aside",{className:"border-2 border-success-700 bg-success-500 rounded-xl p-6 flex items-start gap-4",children:[(0,l.jsx)("img",{src:te.alertCheckIcon,width:30,height:30,className:"mt-1"}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"block font-bold mb-2",children:"Dear Esteemed Contestant/Guardian"}),(0,l.jsxs)("span",{className:"font-medium",children:["Congratulations, ",c,"! Your submission to ",a.name," has been received successfully. Your code is ",(0,l.jsx)("span",{className:"font-semibold",children:e.code}),"."]})]})]}),(0,l.jsxs)("div",{className:"grid sm:grid-cols-2 justify-between gap-6 sm:gap-10",children:[(0,l.jsx)("img",{src:e.image_url,alt:"kid smiling",className:"rounded-3xl"}),(0,l.jsxs)("div",{className:"grid gap-1 leading-tight",children:[(0,l.jsxs)("p",{className:"",children:[(0,l.jsx)("span",{className:"block font-satoshi-bold",children:"Full Name"}),(0,l.jsx)("span",{className:"block capitalize",children:c})]}),(0,l.jsxs)("p",{className:"",children:[(0,l.jsx)("span",{className:"block font-satoshi-bold",children:"Date of Birth"}),(0,l.jsx)("span",{className:"block",children:f})]}),(0,l.jsxs)("p",{className:"",children:[(0,l.jsx)("span",{className:"block font-satoshi-bold",children:"Gender"}),(0,l.jsx)("span",{className:"block capitalize",children:e.contestant_biodata.sex.toLowerCase()})]}),(0,l.jsxs)("p",{className:"min-w-0",children:[(0,l.jsx)("span",{className:"block font-satoshi-bold",children:"Email Address"}),(0,l.jsx)("span",{className:"block truncate ...",children:e.contestant_biodata.email})]}),(0,l.jsxs)("p",{className:"",children:[(0,l.jsx)("span",{className:"block font-satoshi-bold",children:"State of Residence"}),(0,l.jsx)("span",{className:"block capitalize",children:e.contestant_biodata.state_of_residence})]})]})]})]})}var o=r(d(),1);function G({contest:e}){return(0,o.jsxs)(Y,{method:"POST",encType:"multipart/form-data",className:"bg-secondary p-[5%] sm:p-10 sm:rounded-3xl flex flex-col w-full max-w-xl gap-6",children:[(0,o.jsx)("p",{className:"text-2xl font-satoshi-bold",children:'Participate by filling in your basic information below and clicking "Submit".'}),(0,o.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,o.jsx)(g,{as:"input",labelText:"First Name",id:"first_name",name:"first_name",placeholder:"Enter your first name",required:!0}),(0,o.jsx)(g,{as:"input",labelText:"Last Name",id:"last_name",name:"last_name",placeholder:"Enter your last name",required:!0})]}),(0,o.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,o.jsx)(g,{as:"input",labelText:"Email Address",id:"email",name:"email",placeholder:"Enter your email address",required:!0}),(0,o.jsx)(g,{as:"input",type:"date",labelText:"Date of Birth",id:"dob",name:"dob",placeholder:"dd/mm/yyyy",max:new Date().toISOString().split("T")[0],required:!0})]}),(0,o.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,o.jsxs)("label",{htmlFor:"gender",className:"font-bold flex flex-col",children:["Gender",(0,o.jsxs)(h,{name:"sex",required:!0,children:[(0,o.jsx)(w,{className:"h-10 font-normal rounded-lg shadow-none hover:border-accent",children:(0,o.jsx)(y,{placeholder:"Gender"})}),(0,o.jsxs)(S,{children:[(0,o.jsx)(x,{value:"MALE",className:"focus:bg-blue-700/25",children:"Male"}),(0,o.jsx)(x,{value:"FEMALE",className:"focus:bg-blue-700/25",children:"Female"})]})]})]}),(0,o.jsxs)("label",{htmlFor:"state_of_residence",className:"font-bold flex flex-col",children:["State of Residence",(0,o.jsxs)(h,{name:"state_of_residence",required:!0,children:[(0,o.jsx)(w,{className:"h-10 font-normal rounded-lg shadow-none hover:border-accent",children:(0,o.jsx)(y,{placeholder:"Select a state"})}),(0,o.jsx)(S,{children:Object.entries(oe).map(([a,c])=>(0,o.jsx)(x,{value:a,className:"focus:bg-blue-700/25",children:c},a))})]})]})]}),(0,o.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,o.jsx)(g,{as:"input",type:"tel",labelText:"Whatsapp Number",id:"whatsapp_no",name:"whatsapp_no",placeholder:"Enter your whatsapp number",required:!0}),(0,o.jsxs)("label",{htmlFor:"category",className:"font-bold flex flex-col",children:["Category",(0,o.jsxs)(h,{name:"category",required:!!e.categories.length,children:[(0,o.jsx)(w,{className:"h-10 font-normal rounded-lg shadow-none hover:border-accent",children:(0,o.jsx)(y,{placeholder:"Select a category"})}),(0,o.jsx)(S,{children:e.categories.map(a=>(0,o.jsx)(x,{value:a,className:"focus:bg-blue-700/25",children:a},a))})]})]}),(0,o.jsx)(g,{as:"textarea",labelClassNames:"col-span-2",labelText:"What would you like your voters to know?",id:"info",name:"info",placeholder:""})]}),(0,o.jsx)(se,{labelText:"Upload Image",name:"contestant_image",multiple:!0,required:!0}),(0,o.jsx)("input",{type:"hidden",name:"contestId",value:e._id}),(0,o.jsx)(ae,{element:"button",type:"submit",name:"intent",value:"register",className:"md:self-end",children:"Submit"})]})}var n=r(d(),1);function P({contest:e}){let a=J();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("header",{className:"wrapper my-16 grid md:grid-cols-2 justify-between gap-6 md:gap-8",children:[(0,n.jsxs)("div",{className:"flex flex-col justify-around",children:[(0,n.jsxs)("div",{className:"max-w-2xl",children:[(0,n.jsx)("h1",{className:"text-accent text-2xl lg:text-4xl font-satoshi-black max-w-3xl mb-3",children:e.name}),(0,n.jsx)("p",{className:"font-satoshi-medium",children:e.desc})]}),(0,n.jsx)(I,{deadline:new Date(e.reg_deadline),title:"registration ends in"})]}),(0,n.jsx)("img",{src:e.image||b,alt:"kid smiling",className:"w-full rounded-3xl h-[350px] object-cover"})]}),(0,n.jsx)("section",{className:"sm:wrapper my-16",children:(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-6 sm:gap-8",children:[(0,n.jsx)(ne,{contest:e}),a?.data?(0,n.jsx)(A,{contestant:a.data,contest:e}):(0,n.jsx)(G,{contest:e})]})}),(0,n.jsxs)("section",{className:"my-8 md:my-16",children:[(0,n.jsx)("h2",{className:"text-2xl sm:text-[40px] leading-snug font-satoshi-black w-4/5 max-w-lg text-center mx-auto my-10",children:"Over 500 registered participants and counting"}),(0,n.jsx)(re,{contestants:[{id:"sdjc",image:Q},{id:"adcn",image:X},{id:"kjsd",image:Z}]})]})]})}var D=r(d(),1);function xe(){let e=H("routes/_public.contests.$tournamentId.$contestId");if(!e)throw new Error("Could not load stage contestants");let{contest:a,stage:c}=e;return(0,D.jsx)("main",{className:"grow",children:a.status==="registering"?(0,D.jsx)(P,{contest:a}):(0,D.jsx)(V,{contest:a,stage:c})})}export{Ee as a,j as b,xe as c};
