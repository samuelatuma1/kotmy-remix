import{a as v}from"/build/_shared/chunk-R3PEEDBD.js";import{a as f}from"/build/_shared/chunk-6Y722YOL.js";import{a as p}from"/build/_shared/chunk-DU3ERRUZ.js";import{a as d,b as m}from"/build/_shared/chunk-7ERNTC7H.js";import{a as b,b as g}from"/build/_shared/chunk-653BTUZP.js";import{c as u}from"/build/_shared/chunk-W5DRAD4K.js";var c=u(b(),1);var o=u(g(),1);function w({categories:s}){let[t,e]=(0,c.useState)(""),[r,i]=(0,c.useState)(s??[]);function n(){!t||r.includes(t)||(i(l=>[...l,t]),e(""))}function _(l){i(h=>h.filter(N=>N!==l))}return(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"font-bold",children:"Categories"}),(0,o.jsxs)("fieldset",{className:"grid gap-3 sm:gap-6 sm:grid-cols-3 border border-secondary p-3 rounded-lg",children:[r.map(l=>(0,o.jsxs)("div",{className:"p-3 rounded-lg border border-secondary flex items-center",children:[(0,o.jsx)("input",{type:"text",className:"grow pointer-events-none bg-transparent",name:"category",defaultValue:l}),(0,o.jsx)("button",{type:"button",children:(0,o.jsx)(m,{src:d.closeIcon,width:".9em",className:"hover:text-red-400",onClick:()=>_(l)})})]},l)),(0,o.jsxs)("div",{className:"flex max-sm:flex-col gap-3 sm:gap-6 sm:items-end sm:col-span-3",children:[(0,o.jsx)(p,{as:"input",placeholder:"Enter new category",id:"new_catogory",value:t,onChange:l=>e(l.target.value)}),(0,o.jsxs)("button",{type:"button",onClick:n,className:"flex gap-2 items-center whitespace-nowrap px-8 py-3 rounded-lg border border-secondary hover:border-slate-400",children:[(0,o.jsx)(m,{src:d.addIcon,width:".9em"}),"Add Category"]})]})]})]})}var y=u(b(),1);var a=u(g(),1);function S(s,t){return t.type==="add"?[...s,{stage:(s.at(-1)?.stage??0)+1,weight:0,rates:{social_media:{type:"facebook",amount:0},tally:0,judge:0,givaah:0}}]:t.type==="remove"?s.filter(e=>e.stage!==t.stageNumber||e._id!==t.value):t.type==="edit_sm_type"?s.map(e=>e.stage===t.stageNumber?{...e,rates:{...e.rates,social_media:{...e.rates.social_media,type:t.value}}}:e):t.type==="edit_stage_number"&&!s.some(e=>e.stage===t.value)?s.map(e=>e.stage===t.stageNumber?{...e,stage:t.value}:e):t.type==="edit_stage_weight"?s.map(e=>e.stage===t.stageNumber?{...e,weight:t.value}:e):s}function C({stages:s}){let[t,e]=(0,y.useReducer)(S,s??[]);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"font-bold",children:["Stages ",(0,a.jsx)("span",{className:"font-normal",children:"(weights must sum up to 100%)"})]}),(0,a.jsxs)("div",{className:"grid gap-4 border border-secondary p-3 rounded-lg",children:[t.map((r,i)=>(0,a.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,a.jsxs)("fieldset",{className:"grow grid gap-3 sm:gap-6 sm:grid-cols-3",children:[(0,a.jsx)(p,{as:"input",type:"number",labelText:"Stage",id:`Stage_${i+1}`,value:r.stage,onChange:n=>e({type:"edit_stage_number",stageNumber:r.stage,value:+n.target.value})}),(0,a.jsx)(p,{as:"input",type:"number",labelText:"Stage Weight (%)",id:`weight_${i+1}`,name:`weight_${i+1}`,value:r?.weight??0,min:0,onChange:n=>e({type:"edit_stage_weight",stageNumber:r.stage,value:+n.target.value})}),(0,a.jsx)(v,{label:"Social Media",id:`social_media_${i+1}`,name:`social_media_${i+1}`,className:"capitalize",value:r?.rates?.social_media.type??"",onChange:n=>e({type:"edit_sm_type",stageNumber:r.stage,value:n.target.value}),children:f.map(n=>(0,a.jsx)("option",{value:n,children:n},n))}),r._id?(0,a.jsx)("input",{type:"hidden",name:`stage_${i+1}_id`,value:r._id}):null]}),r._id?(0,a.jsx)("button",{type:"submit",className:"m-4",title:"delete stage",name:"intent",value:r._id,children:(0,a.jsx)(m,{src:d.closeIcon,width:".9em",className:"hover:text-red-400"})}):(0,a.jsx)("button",{type:"button",className:"m-4",value:r._id,onClick:()=>e({type:"remove",stageNumber:r.stage}),children:(0,a.jsx)(m,{src:d.closeIcon,width:".9em",className:"hover:text-red-400"})})]},r.stage)),(0,a.jsxs)("button",{type:"button",onClick:()=>e({type:"add"}),className:"flex gap-2 place-self-start items-center whitespace-nowrap px-6 py-2 rounded-lg border border-secondary hover:border-slate-400",children:[(0,a.jsx)(m,{src:d.addIcon,width:".9em"}),"Add Stage"]})]}),(0,a.jsx)("input",{type:"hidden",name:"no_of_stages",value:t.length})]})}export{w as a,C as b};
