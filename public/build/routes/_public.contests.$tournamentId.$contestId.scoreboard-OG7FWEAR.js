import{a as u,b as x}from"/build/_shared/chunk-PMPMQY2J.js";import"/build/_shared/chunk-6Y722YOL.js";import"/build/_shared/chunk-HYPIXEO2.js";import"/build/_shared/chunk-E6DLCIAF.js";import"/build/_shared/chunk-WFNSFFXI.js";import{a as F}from"/build/_shared/chunk-OOBZAV5T.js";import{a as E,b as A,c as B,d as I,e as L}from"/build/_shared/chunk-BI2ASFVQ.js";import"/build/_shared/chunk-7FR7ZJEG.js";import"/build/_shared/chunk-HBHTWN7R.js";import"/build/_shared/chunk-LTJF3XWP.js";import{a as T}from"/build/_shared/chunk-DU3ERRUZ.js";import"/build/_shared/chunk-IQWR6URL.js";import"/build/_shared/chunk-UJQ7BYHA.js";import"/build/_shared/chunk-ZJKJC2ET.js";import"/build/_shared/chunk-SV3SHFZF.js";import"/build/_shared/chunk-FNRBHFIN.js";import{a as c}from"/build/_shared/chunk-EQOSR4CK.js";import{a as R}from"/build/_shared/chunk-PCPGSTDU.js";import{a as f}from"/build/_shared/chunk-XVMOG6SQ.js";import"/build/_shared/chunk-7ERNTC7H.js";import{a as O}from"/build/_shared/chunk-OS2L5QU2.js";import{j as g}from"/build/_shared/chunk-NNNROOR6.js";import{a as D}from"/build/_shared/chunk-IXKRAC64.js";import"/build/_shared/chunk-G6RWU2BR.js";import{a as z}from"/build/_shared/chunk-74OT6ATM.js";import{i as S,l as k,r as C,t as v}from"/build/_shared/chunk-SN2BHVXC.js";import{a as M,b as d}from"/build/_shared/chunk-653BTUZP.js";import{c as r}from"/build/_shared/chunk-W5DRAD4K.js";var U=r(z(),1);var P=r(R(),1),j=r(O(),1);var N=r(M(),1),h=r(d(),1);function b({percentage:l}){let e=(0,N.useRef)(null);return(0,N.useEffect)(()=>{e.current?.style.setProperty("--progress",`${l}%`)},[]),(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("div",{ref:e,className:"progressBar w-full sm:min-w-[70px] h-2 bg-[#EAEBF0] rounded",children:(0,h.jsx)("div",{className:"progress h-full w-[--progress] bg-[#6246EA] rounded"})}),(0,h.jsxs)("span",{className:"text-sm font-bold",children:[l.toFixed(1),"%"]})]})}var m=r(d(),1);function p({grade:l}){let e=l?l.toUpperCase():"F";return(0,m.jsxs)("div",{className:"grid grid-cols-6 rounded-md overflow-hidden text-white text-xs font-black",children:[(0,m.jsx)("div",{className:c("bg-grade-F h-full px-2 py-1 text-center"),children:e==="F"?e:null}),(0,m.jsx)("div",{className:c("h-full px-2 py-1 text-center",{"bg-grade-E":e<="E","bg-grade-Ea":e>"E"}),children:e==="E"?e:null}),(0,m.jsx)("div",{className:c("h-full px-2 py-1 text-center",{"bg-grade-D":e<="D","bg-grade-Da":e>"D"}),children:e==="D"?e:null}),(0,m.jsx)("div",{className:c("h-full px-2 py-1 text-center",{"bg-grade-C":e<="C","bg-grade-Ca":e>"C"}),children:e==="C"?e:null}),(0,m.jsx)("div",{className:c("h-full px-2 py-1 text-center",{"bg-grade-B":e<="B","bg-grade-Ba":e>"B"}),children:e==="B"?e:null}),(0,m.jsx)("div",{className:c("h-full px-2 py-1 text-center",{"bg-grade-A":e<="A","bg-grade-Aa":e>"A"}),children:e==="A"?e:null})]})}var o=r(d(),1);function y({contestants:l,socialMediaType:e}){let i=v();return(0,o.jsx)("div",{className:"grid gap-6 sm:hidden",children:l.map(s=>(0,o.jsxs)("article",{className:"bg-secondary border border-primary rounded-xl p-3 w-full",children:[(0,o.jsxs)("div",{className:"flex gap-4 mb-4 items-center",children:[(0,o.jsxs)("span",{className:"font-satoshi-bold",children:[s.result.position,"."]}),(0,o.jsx)("img",{src:s.image_url||g,alt:"person smiling",width:90,height:90,className:"rounded-full aspect-square object-cover"}),(0,o.jsxs)("div",{className:"flex flex-col gap-2 grow",children:[(0,o.jsx)("p",{className:"uppercase text-sm font-satoshi-medium text-ellipsis overflow-hidden",children:`${s.contestant_biodata.first_name} ${s.contestant_biodata.last_name}`}),(0,o.jsx)(b,{percentage:s.result.overall_vote_percentage}),(0,o.jsx)(p,{grade:s.result.grade})]})]}),(0,o.jsx)("p",{className:"mb-2 text-xs font-satoshi-bold text-[#5F6D7E]",children:"Vote for this contestant"}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[e==="kotmy"?(0,o.jsxs)(i.Form,{method:"POST",children:[(0,o.jsx)("input",{type:"hidden",name:"contestant_id",value:s._id}),(0,o.jsx)("input",{type:"hidden",name:"stage_id",value:s.stage_id}),(0,o.jsx)("input",{type:"hidden",name:"intent",value:"kotmy_vote"}),(0,o.jsx)(u,{className:"w-full",type:e,url:s.social_media_url,count:f(s.vote.social_media)})]}):(0,o.jsx)(u,{type:e,url:s.social_media_url,count:f(s.vote.social_media)}),(0,o.jsx)(x,{contestant:s})]})]},s._id))})}var t=r(d(),1);function _({contestants:l,socialMediaType:e}){let i=v();return(0,t.jsxs)("table",{className:"w-full table-auto hidden sm:table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-secondary",children:[(0,t.jsx)("th",{className:"text-left uppercase text-sm font-satoshi-bold px-6 py-3",children:"position"}),(0,t.jsx)("th",{className:"text-left uppercase text-sm font-satoshi-bold px-6 py-3",children:"name"}),(0,t.jsx)("th",{className:"text-left uppercase text-sm font-satoshi-bold px-6 py-3 hidden lg:table-cell",children:"progress"}),(0,t.jsx)("th",{className:"text-left uppercase text-sm font-satoshi-bold px-6 py-3  hidden xl:table-cell",children:"grade"}),(0,t.jsx)("th",{className:"text-left uppercase text-sm font-satoshi-bold px-6 py-3",children:"votes (SM, tally, givaah)"})]})}),(0,t.jsx)("tbody",{children:l.map(s=>(0,t.jsxs)("tr",{className:"border-b border-secondary",children:[(0,t.jsx)("td",{className:"px-6 py-3",children:s.result.position}),(0,t.jsx)("td",{className:"px-6 py-3 font-satoshi-medium max-w-[300px] truncate uppercase",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("img",{src:s.image_url||g,alt:"person smiling",width:48,className:"rounded-full aspect-square object-cover"}),(0,t.jsxs)("div",{className:"truncate uppercase grow",children:[`${s.contestant_biodata.first_name} ${s.contestant_biodata.last_name}`,(0,t.jsxs)("dl",{className:"lg:hidden",children:[(0,t.jsx)("dt",{className:"sr-only",children:"progress"}),(0,t.jsx)("dd",{children:(0,t.jsx)(b,{percentage:s.result.overall_vote_percentage})}),(0,t.jsx)("dt",{className:"sr-only",children:"grade"}),(0,t.jsx)("dd",{children:(0,t.jsx)(p,{grade:s.result.grade})})]})]})]})}),(0,t.jsxs)("td",{className:"px-6 py-3 hidden lg:table-cell",children:[(0,t.jsx)(b,{percentage:s.result.overall_vote_percentage}),(0,t.jsxs)("dl",{className:"xl:hidden",children:[(0,t.jsx)("dt",{className:"sr-only",children:"grade"}),(0,t.jsx)("dd",{children:(0,t.jsx)(p,{grade:s.result.grade})})]})]}),(0,t.jsx)("td",{className:"px-6 py-3 hidden xl:table-cell",children:(0,t.jsx)(p,{grade:s.result.grade})}),(0,t.jsxs)("td",{className:"px-6 py-3 grid grid-cols-2 gap-2",children:[e==="kotmy"?(0,t.jsxs)(i.Form,{method:"POST",children:[(0,t.jsx)("input",{type:"hidden",name:"contestant_id",value:s._id}),(0,t.jsx)("input",{type:"hidden",name:"stage_id",value:s.stage_id}),(0,t.jsx)("input",{type:"hidden",name:"intent",value:"kotmy_vote"}),(0,t.jsx)(u,{className:"w-full",type:e,url:s.social_media_url,count:f(s.vote.social_media)})]}):(0,t.jsx)(u,{type:e,url:s.social_media_url,count:f(s.vote.social_media)}),(0,t.jsx)(x,{contestant:s})]})]},s._id))})]})}var a=r(d(),1);function $(){let l=C("routes/_public.contests.$tournamentId.$contestId");if(!l)throw new Error("Could not load stage contestants");let{contest:e,stage:i}=l,[s,V]=S(),G=e.status==="registering"?"yellow":e.status==="ongoing"?"green":e.status==="completed"?"red":"gray";return(0,a.jsxs)("main",{className:"grow",children:[(0,a.jsxs)("header",{className:"wrapper my-16 grid md:grid-cols-2 justify-between gap-6 md:gap-8",children:[(0,a.jsxs)("div",{className:"grid",children:[(0,a.jsxs)("div",{className:"max-w-2xl",children:[(0,a.jsx)("h1",{className:"text-accent text-2xl lg:text-4xl font-satoshi-black max-w-3xl mb-3 uppercase",children:e.name}),(0,a.jsx)("p",{className:"font-satoshi-medium",children:e.desc})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-2 max-w-4xl",children:[(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("span",{className:"block font-satoshi-bold mb-1",children:"Status"}),(0,a.jsx)(D,{status:e.status,color:G})]}),(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("span",{className:"block font-satoshi-bold mb-1",children:"Categories"}),(0,a.jsx)("div",{className:"flex gap-4 flex-wrap capitalize",children:e.categories.map(n=>(0,a.jsxs)("span",{children:["~ ",n]},n))})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("span",{className:"block font-satoshi-bold mb-1",children:"Prizes"}),(0,a.jsx)("span",{className:"block",children:e.prizes})]})]}),(0,a.jsx)(F,{deadline:new Date(e.end_date),title:"contest ends in"})]}),(0,a.jsx)("img",{src:e.image||g,alt:"kid smiling",className:"w-full rounded-3xl h-[350px] object-cover"})]}),(0,a.jsx)("section",{className:"sm:bg-white",children:(0,a.jsxs)("div",{className:"wrapper my-16",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-y-4 gap-x-6 sm:gap-x-8 py-6 flex-wrap",children:[(0,a.jsxs)("span",{className:"font-satoshi-medium text-xl",children:[i?.contestants.length??0," Contestants"]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)(T,{as:"input",type:"search",className:"min-w-[280px] bg-white",placeholder:"Search contestant by name"}),(0,a.jsxs)(E,{value:String(i?.stage),onValueChange:n=>V(w=>(w.set("stage",n),w)),children:[(0,a.jsx)(B,{className:"sm:w-[180px] h-auto rounded-lg shadow-none bg-white hover:border-accent",children:(0,a.jsx)(A,{placeholder:"Stage 1"})}),(0,a.jsx)(I,{children:e.stages.map(n=>(0,a.jsxs)(L,{value:String(n.stage),className:"focus:bg-blue-700/25",children:["Stage ",n.stage]},n.stage))})]})]}),(0,a.jsx)(k,{to:`/results/${e.id}`,className:"w-fit text-accent font-bold hover:underline underline-offset-4",children:"See result table"})]}),(0,a.jsx)(_,{contestants:i?.contestants??[],socialMediaType:i?.rates.social_media.type??"kotmy"}),(0,a.jsx)(y,{contestants:i?.contestants??[],socialMediaType:i?.rates.social_media.type??"kotmy"})]})})]})}export{$ as default};
