import{a as f,b as y}from"/build/_shared/chunk-FSVCQBID.js";import"/build/_shared/chunk-6Y722YOL.js";import"/build/_shared/chunk-HYPIXEO2.js";import"/build/_shared/chunk-E6DLCIAF.js";import"/build/_shared/chunk-IWGJOQMS.js";import{a as F}from"/build/_shared/chunk-OOBZAV5T.js";import{a as E,b as I,c as A,d as L,e as P}from"/build/_shared/chunk-BI2ASFVQ.js";import"/build/_shared/chunk-7FR7ZJEG.js";import{j as u}from"/build/_shared/chunk-NNNROOR6.js";import"/build/_shared/chunk-HBHTWN7R.js";import"/build/_shared/chunk-LTJF3XWP.js";import{a as D}from"/build/_shared/chunk-DU3ERRUZ.js";import"/build/_shared/chunk-IQWR6URL.js";import"/build/_shared/chunk-UJQ7BYHA.js";import"/build/_shared/chunk-ZJKJC2ET.js";import"/build/_shared/chunk-SV3SHFZF.js";import"/build/_shared/chunk-FNRBHFIN.js";import{a as c}from"/build/_shared/chunk-EQOSR4CK.js";import{a as O}from"/build/_shared/chunk-PCPGSTDU.js";import{a as h}from"/build/_shared/chunk-XVMOG6SQ.js";import{a as T}from"/build/_shared/chunk-IXKRAC64.js";import"/build/_shared/chunk-7ERNTC7H.js";import"/build/_shared/chunk-G6RWU2BR.js";import{a as j}from"/build/_shared/chunk-OS2L5QU2.js";import{a as z}from"/build/_shared/chunk-74OT6ATM.js";import{i as k,l as C,r as B,t as v}from"/build/_shared/chunk-SN2BHVXC.js";import{a as M,b as m}from"/build/_shared/chunk-653BTUZP.js";import{c as r}from"/build/_shared/chunk-W5DRAD4K.js";var R=r(z(),1);var $=r(O(),1),U=r(j(),1);var N=r(M(),1),x=r(m(),1);function b({percentage:i}){let t=(0,N.useRef)(null);return(0,N.useEffect)(()=>{t.current?.style.setProperty("--progress",`${i}%`)},[]),(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("div",{ref:t,className:"progressBar w-full sm:min-w-[70px] h-2 bg-[#EAEBF0] rounded",children:(0,x.jsx)("div",{className:"progress h-full w-[--progress] bg-[#6246EA] rounded"})}),(0,x.jsxs)("span",{className:"text-sm font-bold",children:[i.toFixed(1),"%"]})]})}var n=r(m(),1);function g({grade:i}){let t=i?i.toUpperCase():"F";return(0,n.jsxs)("div",{className:"grid grid-cols-6 rounded-md overflow-hidden text-white text-xs font-black",children:[(0,n.jsx)("div",{className:c("bg-grade-F h-full px-2 py-1 text-center"),children:t==="F"?t:null}),(0,n.jsx)("div",{className:c("h-full px-2 py-1 text-center",{"bg-grade-E":t<="E","bg-grade-Ea":t>"E"}),children:t==="E"?t:null}),(0,n.jsx)("div",{className:c("h-full px-2 py-1 text-center",{"bg-grade-D":t<="D","bg-grade-Da":t>"D"}),children:t==="D"?t:null}),(0,n.jsx)("div",{className:c("h-full px-2 py-1 text-center",{"bg-grade-C":t<="C","bg-grade-Ca":t>"C"}),children:t==="C"?t:null}),(0,n.jsx)("div",{className:c("h-full px-2 py-1 text-center",{"bg-grade-B":t<="B","bg-grade-Ba":t>"B"}),children:t==="B"?t:null}),(0,n.jsx)("div",{className:c("h-full px-2 py-1 text-center",{"bg-grade-A":t<="A","bg-grade-Aa":t>"A"}),children:t==="A"?t:null})]})}var o=r(m(),1);function _({contestants:i,socialMediaType:t}){let d=v();return(0,o.jsx)("div",{className:"grid gap-6 sm:hidden",children:i.map(l=>(0,o.jsxs)("article",{className:"bg-secondary border border-primary rounded-xl p-3 w-full",children:[(0,o.jsxs)("div",{className:"flex gap-4 mb-4 items-center",children:[(0,o.jsxs)("span",{className:"font-satoshi-bold",children:[l.result.position,"."]}),(0,o.jsx)("img",{src:l.image_url||u,alt:"person smiling",width:90,height:90,className:"rounded-full aspect-square object-cover"}),(0,o.jsxs)("div",{className:"flex flex-col gap-2 grow",children:[(0,o.jsx)("p",{className:"uppercase text-sm font-satoshi-medium text-ellipsis overflow-hidden",children:`${l.contestant_biodata.first_name} ${l.contestant_biodata.last_name}`}),(0,o.jsx)(b,{percentage:l.result.overall_vote_percentage}),(0,o.jsx)(g,{grade:l.result.grade})]})]}),(0,o.jsx)("p",{className:"mb-2 text-xs font-satoshi-bold text-[#5F6D7E]",children:"Vote for this contestant"}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[t==="kotmy"?(0,o.jsxs)(d.Form,{method:"POST",children:[(0,o.jsx)("input",{type:"hidden",name:"contestant_id",value:l._id}),(0,o.jsx)("input",{type:"hidden",name:"stage_id",value:l.stage_id}),(0,o.jsx)("input",{type:"hidden",name:"intent",value:"kotmy_vote"}),(0,o.jsx)(f,{className:"w-full",type:t,url:l.social_media_url,count:h(l.vote.social_media)})]}):(0,o.jsx)(f,{type:t,url:l.social_media_url,count:h(l.vote.social_media)}),(0,o.jsx)(y,{contestant:l})]})]},l._id))})}var e=r(m(),1);function w({contestants:i,socialMediaType:t,show_bonus:d}){let l=v();return(0,e.jsxs)("table",{className:"w-full table-auto hidden sm:table",children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{className:"border-b border-secondary",children:[(0,e.jsx)("th",{className:"text-left uppercase text-sm font-satoshi-bold px-6 py-3",children:"position"}),(0,e.jsx)("th",{className:"text-left uppercase text-sm font-satoshi-bold px-6 py-3",children:"name"}),(0,e.jsx)("th",{className:"text-left uppercase text-sm font-satoshi-bold px-6 py-3 hidden lg:table-cell",children:"progress"}),(0,e.jsx)("th",{className:"text-left uppercase text-sm font-satoshi-bold px-6 py-3  hidden xl:table-cell",children:"grade"}),(0,e.jsx)("th",{className:"text-left uppercase text-sm font-satoshi-bold px-6 py-3",children:"votes (SM, tally, givaah)"}),d&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("th",{className:"text-left uppercase text-sm font-satoshi-bold px-6 py-3",children:"SMB"}),(0,e.jsx)("th",{className:"text-left uppercase text-sm font-satoshi-bold px-6 py-3",children:"TB"}),(0,e.jsx)("th",{className:"text-left uppercase text-sm font-satoshi-bold px-6 py-3",children:"GB"}),(0,e.jsx)("th",{className:"text-left uppercase text-sm font-satoshi-bold px-6 py-3",children:"JB"})]})]})}),(0,e.jsx)("tbody",{children:i.map(s=>(0,e.jsxs)("tr",{className:"border-b border-secondary",children:[(0,e.jsx)("td",{className:"px-6 py-3",children:s.result.position}),(0,e.jsx)("td",{className:"px-6 py-3 font-satoshi-medium max-w-[300px] truncate uppercase",children:(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("img",{src:s.image_url||u,alt:"person smiling",width:48,className:"rounded-full aspect-square object-cover"}),(0,e.jsxs)("div",{className:"truncate uppercase grow",children:[`${s.contestant_biodata.first_name} ${s.contestant_biodata.last_name}`,(0,e.jsxs)("dl",{className:"lg:hidden",children:[(0,e.jsx)("dt",{className:"sr-only",children:"progress"}),(0,e.jsx)("dd",{children:(0,e.jsx)(b,{percentage:s.result.overall_vote_percentage})}),(0,e.jsx)("dt",{className:"sr-only",children:"grade"}),(0,e.jsx)("dd",{children:(0,e.jsx)(g,{grade:s.result.grade})})]})]})]})}),(0,e.jsxs)("td",{className:"px-6 py-3 hidden lg:table-cell",children:[(0,e.jsx)(b,{percentage:s.result.overall_vote_percentage}),(0,e.jsxs)("dl",{className:"xl:hidden",children:[(0,e.jsx)("dt",{className:"sr-only",children:"grade"}),(0,e.jsx)("dd",{children:(0,e.jsx)(g,{grade:s.result.grade})})]})]}),(0,e.jsx)("td",{className:"px-6 py-3 hidden xl:table-cell",children:(0,e.jsx)(g,{grade:s.result.grade})}),(0,e.jsxs)("td",{className:"px-6 py-3 grid grid-cols-2 gap-2",children:[t==="kotmy"?(0,e.jsxs)(l.Form,{method:"POST",children:[(0,e.jsx)("input",{type:"hidden",name:"contestant_id",value:s._id}),(0,e.jsx)("input",{type:"hidden",name:"stage_id",value:s.stage_id}),(0,e.jsx)("input",{type:"hidden",name:"intent",value:"kotmy_vote"}),(0,e.jsx)(f,{className:"w-full",type:t,url:s.social_media_url,count:h(s.vote.social_media)})]}):(0,e.jsx)(f,{type:t,url:s.social_media_url,count:h(s.vote.social_media)}),(0,e.jsx)(y,{contestant:s})]}),d&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("td",{className:"px-6 py-3",children:s.vote.social_media_bonus}),(0,e.jsx)("td",{className:"px-6 py-3",children:s.vote.tally_bonus}),(0,e.jsx)("td",{className:"px-6 py-3",children:s.vote.givaah_bonus}),(0,e.jsx)("td",{className:"px-6 py-3",children:s.vote.judge_bonus})]})]},s._id))})]})}var a=r(m(),1);function V(){let i=B("routes/_public.contests.$tournamentId.$contestId");if(!i)throw new Error("Could not load stage contestants");let{contest:t,stage:d}=i,[l,s]=k(),G=t.status==="registering"?"yellow":t.status==="ongoing"?"green":t.status==="completed"?"red":"gray";return(0,a.jsxs)("main",{className:"grow",children:[(0,a.jsxs)("header",{className:"wrapper my-16 grid md:grid-cols-2 justify-between gap-6 md:gap-8",children:[(0,a.jsxs)("div",{className:"grid",children:[(0,a.jsxs)("div",{className:"max-w-2xl",children:[(0,a.jsx)("h1",{className:"text-accent text-2xl lg:text-4xl font-satoshi-black max-w-3xl mb-3 uppercase",children:t.name}),(0,a.jsx)("p",{className:"font-satoshi-medium",children:t.desc})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-2 max-w-4xl",children:[(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("span",{className:"block font-satoshi-bold mb-1",children:"Status"}),(0,a.jsx)(T,{status:t.status,color:G})]}),(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("span",{className:"block font-satoshi-bold mb-1",children:"Categories"}),(0,a.jsx)("div",{className:"flex gap-4 flex-wrap capitalize",children:t.categories.map(p=>(0,a.jsxs)("span",{children:["~ ",p]},p))})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("span",{className:"block font-satoshi-bold mb-1",children:"Prizes"}),(0,a.jsx)("span",{className:"block",children:t.prizes})]})]}),(0,a.jsx)(F,{deadline:new Date(t.end_date),title:"contest ends in"})]}),(0,a.jsx)("img",{src:t.image||u,alt:"kid smiling",className:"w-full rounded-3xl h-[350px] object-cover"})]}),(0,a.jsx)("section",{className:"sm:bg-white",children:(0,a.jsxs)("div",{className:"wrapper my-16",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-y-4 gap-x-6 sm:gap-x-8 py-6 flex-wrap",children:[(0,a.jsxs)("span",{className:"font-satoshi-medium text-xl",children:[d?.contestants.length??0," Contestants"]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)(D,{as:"input",type:"search",className:"min-w-[280px] bg-white",placeholder:"Search contestant by name"}),(0,a.jsxs)(E,{value:String(d?.stage),onValueChange:p=>s(S=>(S.set("stage",p),S)),children:[(0,a.jsx)(A,{className:"sm:w-[180px] h-auto rounded-lg shadow-none bg-white hover:border-accent",children:(0,a.jsx)(I,{placeholder:"Stage 1"})}),(0,a.jsx)(L,{children:t.stages.map(p=>(0,a.jsxs)(P,{value:String(p.stage),className:"focus:bg-blue-700/25",children:["Stage ",p.stage]},p.stage))})]})]}),(0,a.jsx)(C,{to:`/results/${t.id}`,className:"w-fit text-accent font-bold hover:underline underline-offset-4",children:"See result table"})]}),(0,a.jsx)(w,{contestants:d?.contestants??[],socialMediaType:d?.rates.social_media.type??"kotmy",show_bonus:d?.enable_bonus??!1}),(0,a.jsx)(_,{contestants:d?.contestants??[],socialMediaType:d?.rates.social_media.type??"kotmy"})]})})]})}export{V as default};
