import{a as M}from"/build/_shared/chunk-L3MRYEEI.js";import{a as te}from"/build/_shared/chunk-Z25BEM5B.js";import{a as E}from"/build/_shared/chunk-DLUBBNLS.js";import{a as Y}from"/build/_shared/chunk-MPFSB7BL.js";import{a as u,b,c as S,d as x,e as h,f as T,g as D,h as C}from"/build/_shared/chunk-HYPIXEO2.js";import"/build/_shared/chunk-E6DLCIAF.js";import{a as A}from"/build/_shared/chunk-WFNSFFXI.js";import{a as R,b as j,c as H,d as P,e as k}from"/build/_shared/chunk-BI2ASFVQ.js";import"/build/_shared/chunk-7FR7ZJEG.js";import"/build/_shared/chunk-HBHTWN7R.js";import"/build/_shared/chunk-LTJF3XWP.js";import{a as f}from"/build/_shared/chunk-DU3ERRUZ.js";import"/build/_shared/chunk-IQWR6URL.js";import"/build/_shared/chunk-UJQ7BYHA.js";import"/build/_shared/chunk-ZJKJC2ET.js";import"/build/_shared/chunk-SV3SHFZF.js";import"/build/_shared/chunk-FNRBHFIN.js";import{a as g}from"/build/_shared/chunk-EQOSR4CK.js";import{a as ce}from"/build/_shared/chunk-PCPGSTDU.js";import{a as Z,b as v}from"/build/_shared/chunk-DFX53F3J.js";import{a as q,c as ee}from"/build/_shared/chunk-EHYIQE7U.js";import{a as r,b as m}from"/build/_shared/chunk-7ERNTC7H.js";import{a as me}from"/build/_shared/chunk-OS2L5QU2.js";import{j as U}from"/build/_shared/chunk-NNNROOR6.js";import{a as ge}from"/build/_shared/chunk-56NY7JRB.js";import{a as X}from"/build/_shared/chunk-IXKRAC64.js";import"/build/_shared/chunk-G6RWU2BR.js";import{a as de}from"/build/_shared/chunk-74OT6ATM.js";import{d as W,m as Q,q as F,t as I}from"/build/_shared/chunk-SN2BHVXC.js";import{a as re,b as i}from"/build/_shared/chunk-653BTUZP.js";import{c as l}from"/build/_shared/chunk-W5DRAD4K.js";var oe=l(de(),1);var fe=l(ge(),1),ne=l(me(),1);var ae=l(re(),1);var t=l(i(),1);function z({disabled:e,contestant:a}){let{stage:d}=F(),p=d.rates.social_media.type==="kotmy",[w,V]=(0,ae.useState)(null),{filePreview:L,clearFilePreview:J}=te(w);return(0,t.jsxs)(u,{onOpenChange:_=>{_||J()},children:[(0,t.jsx)(b,{disabled:e,title:"Edit contestant",className:g("flex items-center justify-center border min-w-[32px] min-h-[32px] rounded-full border-[#262626] bg-[#F7F7F8] text-primary",{"bg-slate-100 border-slate-400 text-slate-400 cursor-not-allowed":e}),children:(0,t.jsx)(m,{src:r.editIcon,className:"w-3"})}),e?null:(0,t.jsx)(x,{className:"bg-secondary max-h-screen overflow-y-auto",children:(0,t.jsxs)(h,{children:[(0,t.jsx)(D,{children:"Edit Contestant Data"}),(0,t.jsx)(C,{children:(0,t.jsxs)(Q,{method:"POST",className:"text-primary text-xs flex flex-col gap-4 mt-3",encType:"multipart/form-data",children:[(0,t.jsxs)("fieldset",{className:"py-1 grid grid-cols-2 gap-3",children:[(0,t.jsx)("legend",{className:"text-gray-400 font-medium",children:"Biodata"}),(0,t.jsxs)("div",{className:"relative max-sm:col-span-2 row-span-3 flex flex-col max-h-56 overflow-y-hidden rounded text-left font-semibold",children:["Image",(0,t.jsx)("img",{src:L||a.image_url||U,alt:"contestant image",width:300,height:300,className:"bg-neutral-200 size-full object-cover rounded"}),(0,t.jsx)(E,{icon:r.closeIcon,element:"button",type:"button",onClick:()=>J(),className:g("absolute bottom-2 right-2 bg-white/80 p-2 rounded-full hover:bg-red-50 hover:text-red-400 transition-colors",{hidden:!L})}),(0,t.jsxs)("label",{htmlFor:"media",className:g("absolute bottom-2 right-2 bg-white/80 p-2 rounded-full hover:bg-white transition-colors cursor-pointer",{hidden:L}),children:[(0,t.jsx)("input",{type:"file",name:"media",id:"media",hidden:!0,onChange:_=>V(_.target.files)}),(0,t.jsx)(m,{src:r.imageIcon})]})]}),(0,t.jsx)(f,{as:"input",id:"first_name",name:"first_name",labelText:"First Name",labelClassNames:"text-left",defaultValue:a.contestant_biodata.first_name}),(0,t.jsx)(f,{as:"input",id:"last_name",name:"last_name",labelText:"Last Name",labelClassNames:"text-left",defaultValue:a.contestant_biodata.last_name}),(0,t.jsx)(f,{as:"input",id:"email",name:"email",labelText:"Email Address",labelClassNames:"text-left",defaultValue:a.contestant_biodata.email}),(0,t.jsxs)("label",{htmlFor:"gender",className:"font-bold flex flex-col text-left",children:["Gender",(0,t.jsxs)(R,{name:"sex",required:!0,defaultValue:a.contestant_biodata.sex,children:[(0,t.jsx)(H,{className:"h-10 font-normal rounded-lg shadow-none hover:border-accent",children:(0,t.jsx)(j,{placeholder:"Gender"})}),(0,t.jsxs)(P,{children:[(0,t.jsx)(k,{value:"MALE",className:"focus:bg-blue-700/25",children:"Male"}),(0,t.jsx)(k,{value:"FEMALE",className:"focus:bg-blue-700/25",children:"Female"})]})]})]}),(0,t.jsx)(f,{as:"input",type:"date",labelText:"Date of Birth",id:"dob",name:"dob",labelClassNames:"text-left",defaultValue:q(a.contestant_biodata.dob),max:new Date().toISOString().split("T")[0]}),(0,t.jsxs)("label",{htmlFor:"gender",className:"font-bold flex flex-col text-left",children:["State of Residence",(0,t.jsxs)(R,{name:"state",required:!0,defaultValue:a.contestant_biodata.state_of_residence,children:[(0,t.jsx)(H,{className:"h-10 font-normal rounded-lg shadow-none hover:border-accent",children:(0,t.jsx)(j,{placeholder:"State"})}),(0,t.jsx)(P,{children:Object.entries(Y).map(([_,ie])=>(0,t.jsx)(k,{value:_,className:"focus:bg-blue-700/25",children:ie},_))})]})]})]}),(0,t.jsxs)("fieldset",{className:"py-1 grid grid-cols-2 gap-3",children:[(0,t.jsx)("legend",{className:"text-gray-400 font-medium",children:"Voting"}),(0,t.jsx)(f,{as:"input",id:"social_media_url",name:"social_media_url",labelText:"Social Media Link",labelClassNames:"text-left",defaultValue:a.social_media_url,disabled:p}),(0,t.jsx)(f,{as:"input",id:"social_media_vote",name:"social_media_vote",labelText:"Social Media Vote",labelClassNames:"text-left",type:"number",min:0,defaultValue:a?.vote.social_media}),(0,t.jsx)(f,{as:"input",id:"stage_bonus",name:"stage_bonus",labelText:"Stage Bonus",type:"number",labelClassNames:"text-left",min:0,defaultValue:a.vote.bonus}),(0,t.jsx)(f,{as:"input",id:"judge_vote",name:"judge_vote",labelText:"Judge Vote",type:"number",labelClassNames:"text-left",min:0,defaultValue:a.vote.judge})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-6",children:[(0,t.jsx)("input",{type:"hidden",name:"contestant_id",value:a._id}),(0,t.jsx)(A,{element:"button",type:"reset",variant:"outline",className:"px-3 py-2 rounded-md font-bold min-w-[90px] border-secondary hover:border-slate-400 text-primary",children:"Reset"}),(0,t.jsx)(S,{type:"submit",name:"intent",value:"edit",className:"bg-accent px-3 py-2 rounded-md font-bold min-w-[90px] text-white",children:"Submit"})]})]})})]})})]})}var c=l(i(),1);function $({disabled:e}){return(0,c.jsxs)(u,{children:[(0,c.jsx)(b,{disabled:e,title:"Delete contestant",className:g("flex items-center justify-center border min-w-[32px] min-h-[32px] rounded-full border-red-500 bg-red-50 text-red-500",{"bg-slate-100 border-slate-400 text-slate-400 cursor-not-allowed":e}),children:(0,c.jsx)(m,{src:r.trashIcon,className:"w-3"})}),(0,c.jsxs)(x,{className:"bg-secondary",children:[(0,c.jsxs)(h,{children:[(0,c.jsx)(D,{children:"Delete contestant"}),(0,c.jsx)(C,{children:"This contestant will be deleted from the records. Are you sure you want to proceed?"})]}),(0,c.jsx)(T,{className:"flex justify-end gap-6",children:(0,c.jsx)(A,{element:"button",type:"submit",kind:"danger",className:"px-3 py-2 rounded-md font-bold min-w-[90px] text-white",children:"Proceed"})})]})]})}var o=l(i(),1);function B({disabled:e,contestants:a}){let d=I(),p=a.map(w=>w._id).join("|");return(0,o.jsxs)(u,{children:[(0,o.jsx)(b,{disabled:e,title:"Evict contestant",className:g("flex items-center justify-center border min-w-[32px] min-h-[32px] rounded-full border-red-500 bg-red-50 text-red-500",{"bg-slate-100 border-slate-400 text-slate-400 cursor-not-allowed":e}),children:(0,o.jsx)(m,{src:r.downArrowIcon,className:"size-3.5"})}),(0,o.jsxs)(x,{className:"bg-secondary p-0 gap-0",children:[(0,o.jsxs)(h,{children:[(0,o.jsxs)(D,{className:"p-4 flex gap-3",children:[(0,o.jsx)("div",{className:"size-11 rounded-full bg-orange-100 flex items-center justify-center",children:(0,o.jsx)(m,{src:r.questionIcon})}),(0,o.jsxs)("p",{children:[(0,o.jsx)("span",{className:"block",children:"Evict Contestants"}),(0,o.jsx)("span",{className:"font-normal text-base text-admin-pry",children:"Confirm the eviction of these contestants"})]})]}),(0,o.jsx)(C,{className:"border-y p-4",children:(0,o.jsx)("span",{className:"text-primary mb-2 block",children:"The selected contestants will not proceed to the next stage. Are you sure you want to proceed?"})})]}),(0,o.jsx)(T,{className:"flex justify-end gap-6 p-4",children:(0,o.jsxs)(d.Form,{method:"post",children:[(0,o.jsx)("input",{type:"hidden",name:"contestants_ids",value:p}),(0,o.jsx)("input",{type:"hidden",name:"stage_id",value:a[0]?.stage_id}),(0,o.jsx)(S,{type:"submit",name:"intent",value:"evict",className:"bg-red-500 px-10 py-2 rounded-md font-bold min-w-[90px] text-white",children:"Proceed"})]})})]})]})}var n=l(i(),1);function K({disabled:e,contestants:a}){let d=I(),p=a.map(w=>w._id).join("|");return(0,n.jsxs)(u,{children:[(0,n.jsx)(b,{disabled:e,title:"Admit contestants",className:g("flex items-center justify-center border min-w-[32px] min-h-[32px] rounded-full border-green-500 bg-green-50 text-green-500",{"bg-slate-100 border-slate-400 text-slate-400 cursor-not-allowed":e}),children:(0,n.jsx)(m,{src:r.upArrowIcon,className:"size-3.5"})}),(0,n.jsxs)(x,{className:"bg-secondary p-0 gap-0",children:[(0,n.jsxs)(h,{children:[(0,n.jsxs)(D,{className:"p-4 flex gap-3",children:[(0,n.jsx)("div",{className:"size-11 rounded-full bg-orange-100 flex items-center justify-center",children:(0,n.jsx)(m,{src:r.questionIcon})}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"block",children:"Admit Contestants"}),(0,n.jsx)("span",{className:"font-normal text-base text-admin-pry",children:"Confirm the promotion of these contestants"})]})]}),(0,n.jsx)(C,{className:"border-y p-4",children:(0,n.jsx)("span",{className:"text-primary mb-2 block",children:"The selected contestants will be marked for promotion to the next stage."})})]}),(0,n.jsx)(T,{className:"flex justify-end gap-6 p-4",children:(0,n.jsxs)(d.Form,{method:"post",children:[(0,n.jsx)("input",{type:"hidden",name:"contestants_ids",value:p}),(0,n.jsx)("input",{type:"hidden",name:"stage_id",value:a[0]?.stage_id}),(0,n.jsx)(S,{type:"submit",name:"intent",value:"admit",className:"bg-accent px-10 py-2 rounded-md font-bold min-w-[90px] text-white",children:"Proceed"})]})})]})]})}var N=l(i(),1);function O({table:e}){let a=e.getFilteredSelectedRowModel().rows.length===1,d=e.getFilteredSelectedRowModel().rows.length>=1,p=e.getSelectedRowModel().rows.map(V=>V.original),w=p.at(0)??{};return(0,N.jsxs)("div",{className:"flex gap-4 items-center px-3 mb-3",children:[(0,N.jsx)(z,{disabled:!a,contestant:w}),(0,N.jsx)($,{disabled:!d}),(0,N.jsx)(B,{disabled:!d,contestants:p}),(0,N.jsx)(K,{disabled:!d,contestants:p})]})}var s=l(i(),1),pe=[{id:"select",header:({table:e})=>(0,s.jsx)("div",{className:"flex place-content-center",children:(0,s.jsx)(M,{className:"h-4 w-4",checked:e.getIsAllPageRowsSelected(),onCheckedChange:a=>{e.toggleAllPageRowsSelected(!a)},"aria-label":"Select all"})}),cell:({row:e})=>(0,s.jsx)("div",{className:"flex place-content-center",children:(0,s.jsx)(M,{className:"h-4 w-4",checked:e.getIsSelected(),onCheckedChange:a=>e.toggleSelected(!a),"aria-label":"Select row"})}),enableSorting:!1,enableHiding:!1},{id:"contestant",header:({column:e})=>(0,s.jsx)(v,{column:e,title:"contestant"}),accessorFn:e=>`${e.contestant_biodata.first_name} ${e.contestant_biodata.last_name}`},{id:"dob",accessorFn:e=>ee(new Date(e.contestant_biodata.dob))},{id:"state",accessorFn:e=>e.contestant_biodata.state_of_residence},{accessorKey:"code",header:({column:e})=>(0,s.jsx)(v,{column:e,title:"code"})},{id:"s-media",header:({column:e})=>(0,s.jsx)(v,{column:e,title:"s-media"}),accessorFn:e=>e.vote.social_media},{id:"tally",header:({column:e})=>(0,s.jsx)(v,{column:e,title:"tally"}),accessorFn:e=>e.vote.tally},{id:"givaah",header:({column:e})=>(0,s.jsx)(v,{column:e,title:"givaah"}),accessorFn:e=>e.vote.givaah},{accessorKey:"grade",header:({column:e})=>(0,s.jsx)(v,{column:e,title:"grade"}),accessorFn:e=>e.result.grade||"-"},{accessorKey:"is_evicted",header:({column:e})=>(0,s.jsx)(v,{column:e,title:"status"}),cell:({row:e})=>{let a=e.getValue("is_evicted");return(0,s.jsx)(X,{status:a?"Evicted":"Safe",color:a?"red":"green"})}}];function G({data:e}){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"w-full overflow-x-auto",children:(0,s.jsx)(Z,{data:e,columns:pe,className:"text-sm",TableActions:O})})})}var le=l(ce(),1),y=l(i(),1);function se(){let{contest:e,stage:a}=F(),d=W();return(0,y.jsxs)("main",{className:"w-full overflow-y-auto p-6",children:[(0,y.jsxs)("div",{className:"flex items-start mb-16 gap-4",children:[(0,y.jsx)(E,{icon:r.arrowPrevIcon,className:"hover:bg-[#F7F7F8] text-primary",onClick:()=>d(-1)}),(0,y.jsxs)("h1",{className:"text-lg xs:text-xl font-black text-primary capitalize",children:[e.name," - Stage ",a.stage," contestants"]})]}),(0,y.jsx)("section",{className:"my-12",children:(0,y.jsx)(G,{data:a.contestants})})]})}export{se as default};
