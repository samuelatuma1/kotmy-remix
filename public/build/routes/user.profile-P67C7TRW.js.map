{
  "version": 3,
  "sources": ["../../../app/routes/user.profile.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/user.profile.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/user.profile.tsx\");\n  import.meta.hot.lastModified = \"1765051884107.0273\";\n}\n// REMIX HMR END\n\nimport { Form, useLoaderData, useActionData, useNavigate } from \"@remix-run/react\";\nimport { json } from \"@remix-run/node\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { authServer } from \"~/services/auth/auth.server\";\nimport { useToast } from \"~/components/reusables/use-toast\";\nimport Svg from \"~/components/reusables/Svg\";\nimport Cta from \"~/components/reusables/Cta\";\nimport FormControl from \"~/components/reusables/FormControl\";\nimport { icons } from \"~/assets/icons\";\nimport DragnDrop from \"~/components/public/contests/DragnDrop\";\nexport async function loader({\n  request\n}) {\n  const cookieHeader = request.headers.get(\"Cookie\");\n  const {\n    data,\n    error\n  } = await authServer.getMe(cookieHeader || \"\");\n  return json({\n    data,\n    error\n  });\n}\nexport async function action({\n  request\n}) {\n  const cookieHeader = request.headers.get(\"Cookie\");\n  const formData = await request.formData();\n  const updateData = authServer.prepareUpdateUserPayload(formData);\n  const {\n    data,\n    error\n  } = await authServer.updateProfile(updateData, cookieHeader || \"\");\n  return json({\n    data,\n    error\n  });\n}\nfunction useUserProfileController() {\n  _s();\n  const {\n    toast\n  } = useToast();\n  const loaderData = useLoaderData();\n  const actionData = useActionData();\n  const navigate = useNavigate();\n  const [profile, setProfile] = useState(loaderData?.data?.user_profile || null);\n  const [email, setEmail] = useState(loaderData?.data?.email || \"\");\n  const [imagePreview, setImagePreview] = useState(profile?.image_url);\n  const fileInputRef = useRef(null);\n  useEffect(() => {\n    if (actionData?.error) {\n      toast({\n        variant: \"destructive\",\n        title: \"Update Failed\",\n        description: actionData.error?.detail?.toString() || actionData.error?.toString() || \"Could not update profile.\"\n      });\n    }\n    if (actionData?.data) {\n      toast({\n        variant: \"default\",\n        title: \"Profile Updated\",\n        description: \"Your profile has been updated successfully.\"\n      });\n      setProfile(actionData.data.user_profile || null);\n      setEmail(actionData.data.email || \"\");\n      setImagePreview(actionData.data.user_profile?.image_url);\n    }\n  }, [actionData]);\n\n  // Handle image preview\n  const handleImageChange = e => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setImagePreview(URL.createObjectURL(file));\n    }\n  };\n  return {\n    profile,\n    email,\n    imagePreview,\n    fileInputRef,\n    handleImageChange\n  };\n}\n_s(useUserProfileController, \"jc1NVK0yMBe1Ydi/YAHpd2YGjvw=\", false, function () {\n  return [useToast, useLoaderData, useActionData, useNavigate];\n});\nexport default function UserProfilePage() {\n  _s2();\n  const {\n    profile,\n    email,\n    imagePreview,\n    fileInputRef,\n    handleImageChange\n  } = useUserProfileController();\n  const isLoading = !profile && !email;\n  return <div className=\"min-h-screen text-gray-900 bg-secondary flex flex-col items-center pt-24 pb-16\">\n      <div className=\"max-w-2xl w-full px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex flex-col items-center mb-8\">\n          <div className=\"w-32 h-32 rounded-full overflow-hidden border-4 border-indigo-200 mb-4\">\n            {isLoading ? <div className=\"w-full h-full bg-gray-200 animate-pulse\" /> : imagePreview ? <img src={imagePreview} alt=\"Profile\" className=\"w-full h-full object-cover\" /> : <Svg src={icons.avatarIcon} className=\"w-full h-full\" />}\n          </div>\n          {isLoading ? <>\n              <div className=\"h-8 w-40 bg-gray-200 rounded animate-pulse mb-2\" />\n              <div className=\"h-5 w-56 bg-gray-200 rounded animate-pulse\" />\n            </> : <>\n              <h1 className=\"text-3xl font-bold text-gray-900\">{profile?.first_name} {profile?.last_name}</h1>\n              <p className=\"text-lg text-gray-600\">{email}</p>\n            </>}\n        </div>\n        {isLoading ? <div className=\"bg-white border rounded-3xl p-8 flex flex-col gap-6\">\n            <div className=\"h-10 bg-gray-200 rounded animate-pulse\" />\n            <div className=\"h-10 bg-gray-200 rounded animate-pulse\" />\n            <div className=\"h-10 bg-gray-200 rounded animate-pulse\" />\n            <div className=\"h-10 bg-gray-200 rounded animate-pulse\" />\n            <div className=\"h-10 bg-gray-200 rounded animate-pulse\" />\n            <div className=\"h-12 bg-gray-200 rounded animate-pulse\" />\n          </div> : <Form method=\"POST\" encType=\"multipart/form-data\" className=\"bg-white border rounded-3xl p-8 flex flex-col gap-6\">\n            <FormControl as=\"input\" id=\"first_name\" name=\"first_name\" labelText=\"First Name\" defaultValue={profile?.first_name} icon={icons.avatarIcon} required />\n            <FormControl as=\"input\" id=\"last_name\" name=\"last_name\" labelText=\"Last Name\" defaultValue={profile?.last_name} icon={icons.avatarIcon} required />\n            <FormControl as=\"input\" id=\"email\" name=\"email\" labelText=\"Email\" defaultValue={email} icon={icons.avatarIcon} required readOnly />\n            <FormControl as=\"input\" id=\"status\" name=\"status\" labelText=\"Status\" defaultValue={profile?.status} icon={icons.avatarIcon} />\n            <label htmlFor=\"image\" className=\"flex items-center gap-2 text-sm font-medium text-gray-700\">\n              <Svg src={icons.avatarIcon} className=\"w-4 h-4\" />\n              Profile Image\n            </label>\n            \n            <DragnDrop name=\"image\" labelText=\"Upload Image\" multiple={false} required={false} />\n            <Cta element=\"button\" type=\"submit\" className=\"rounded-lg p-3\">Update Profile</Cta>\n          </Form>}\n      </div>\n    </div>;\n}\n_s2(UserProfilePage, \"IBBczMrBGnsrEtW00on3dGCCdYE=\", false, function () {\n  return [useUserProfileController];\n});\n_c = UserProfilePage;\nvar _c;\n$RefreshReg$(_c, \"UserProfilePage\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": ["import_react"]
}
