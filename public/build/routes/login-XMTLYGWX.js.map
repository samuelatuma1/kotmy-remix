{
  "version": 3,
  "sources": ["../../../app/routes/login.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/login.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/login.tsx\");\n  import.meta.hot.lastModified = \"1765084642174.4812\";\n}\n// REMIX HMR END\n\nimport { Form, Link, useActionData, useNavigate, useSearchParams } from \"@remix-run/react\";\nimport { icons } from \"~/assets/icons\";\nimport { adminAvatar } from \"~/assets/images\";\nimport FormControl from \"~/components/reusables/FormControl\";\nimport Cta from \"~/components/reusables/Cta\";\nimport Svg from \"~/components/reusables/Svg\";\nimport { json } from \"@remix-run/node\";\nimport { authServer } from \"~/services/auth/auth.server\";\nimport { useToast } from \"~/components/reusables/use-toast\";\nimport { useEffect } from \"react\";\nimport { useUserManager } from \"~/lib/store/store_managers/tokenManager\";\nexport async function loader({\n  request\n}) {\n  return null;\n}\nexport async function action({\n  request\n}) {\n  const url = new URL(request.url);\n  const searchQuery = url.searchParams;\n  const formData = await request.formData();\n  const loginDto = {\n    email: formData.get(\"email\"),\n    password: formData.get(\"password\")\n  };\n  const {\n    error,\n    data,\n    headers\n  } = await authServer.login(loginDto);\n  if (error) {\n    return {\n      error: error.detail?.toString() || \"An error occurred during login.\",\n      data: null\n    };\n  }\n  console.log(\"God abeg o, HEADERS\", headers);\n  let responseHeaders = {};\n  if (headers?.['Set-Cookie']) {\n    const setCookieHeader = headers?.['Set-Cookie'];\n    responseHeaders = {\n      \"Set-Cookie\": setCookieHeader\n    };\n    return json({\n      data,\n      error: null\n    }, {\n      headers: responseHeaders\n    });\n  }\n  return json({\n    data,\n    error: null\n  });\n}\nfunction useLoginController() {\n  _s();\n  const actionData = useActionData();\n  const [searchQuery] = useSearchParams();\n  const {\n    setUserStoreManager,\n    getUserStoreManager\n  } = useUserManager();\n  const {\n    toast\n  } = useToast();\n  const navigate = useNavigate();\n  useEffect(() => {\n    // try to get user\n    const user = getUserStoreManager();\n    if (user) {\n      navigate(searchQuery.get(\"redirectTo\") || \"/user/profile\");\n    }\n    // if user is signed in already, redirect to dashboard\n  }, []);\n  useEffect(() => {\n    if (actionData?.error) {\n      toast({\n        variant: \"destructive\",\n        title: \"Login Failed\",\n        description: actionData.error\n      });\n      actionData.error = \"\";\n    }\n  }, [actionData?.error]);\n  useEffect(() => {\n    // save user to store\n    if (actionData?.data) {\n      setUserStoreManager(actionData.data, true);\n      navigate(searchQuery.get(\"redirectTo\") || '/user/profile');\n      return;\n    }\n  }, [actionData?.data]);\n  return {\n    actionData\n  };\n}\n_s(useLoginController, \"4I0zOnU1KLWq6zBlGGFiZYGjJDA=\", false, function () {\n  return [useActionData, useSearchParams, useUserManager, useToast, useNavigate];\n});\nexport default function Login() {\n  _s2();\n  const {\n    actionData\n  } = useLoginController();\n  return <main className=\"h-dvh bg-secondary p-4 flex flex-col\">\r\n        <Link to={'/'} aria-label='home'>\r\n            <Svg src={icons.logoIcon} className='w-14 h-14 sm:w-16 sm:h-16' />\r\n        </Link>\r\n        <section className=\"grow flex flex-col justify-center items-center\">\r\n\r\n            <Form method=\"POST\" className=\"w-full max-w-md p-4 sm:p-8 bg-white border rounded-3xl flex flex-col gap-3\">\r\n                <div className=\"w-max mx-auto p-4 border border-disabled rounded-full bg-gradient-to-b from-slate-200 to-white\">\r\n                    <div className=\"w-max p-4 border border-disabled rounded-full bg-white\">\r\n                        <img src={adminAvatar} alt=\"person silhouette\" width={24} height={24} />\r\n                    </div>\r\n                </div>\r\n                <h1 className=\"text-2xl font-satoshi-bold text-center\">Enter your details to login</h1>\r\n\r\n                <hr />\r\n                      <p className=\"text-center text-sm mt-2\">Don't have an account yet? <Link to=\"/signup\" className=\"text-primary underline\">Register</Link></p>\r\n\r\n                <div className=\"my-2 flex flex-col gap-3\">\r\n                    <FormControl as=\"input\" id=\"email\" name=\"email\" placeholder=\"Enter your email address\" labelText=\"email\" icon={icons.avatarIcon} required />\r\n                    \r\n                    <FormControl as=\"input\" id=\"password\" name=\"password\" placeholder=\"Enter your password\" labelText=\"Password\" type=\"password\" icon={icons.lockIcon} required />\r\n                </div>\r\n                <Cta element=\"button\" type=\"submit\" className=\"rounded-lg p-3\">Login</Cta>\r\n            </Form>\r\n        </section>\r\n    </main>;\n}\n_s2(Login, \"ma2V1XjkTeFRY9LpgSR9Q3QZgkc=\", false, function () {\n  return [useLoginController];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": ["import_react"]
}
