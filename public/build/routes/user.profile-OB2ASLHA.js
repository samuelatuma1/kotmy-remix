import{a as C}from"/build/_shared/chunk-S5RL25IG.js";import{b as x}from"/build/_shared/chunk-ZDHH7VAG.js";import{a as N}from"/build/_shared/chunk-QPE5NVX7.js";import{a as h}from"/build/_shared/chunk-IWGJOQMS.js";import{a as n}from"/build/_shared/chunk-DU3ERRUZ.js";import"/build/_shared/chunk-EQOSR4CK.js";import{a as o,b as d}from"/build/_shared/chunk-7ERNTC7H.js";import"/build/_shared/chunk-G6RWU2BR.js";import{a as U}from"/build/_shared/chunk-74OT6ATM.js";import{d as f,m as p,q as g,s as v}from"/build/_shared/chunk-SN2BHVXC.js";import{a as L,b}from"/build/_shared/chunk-653BTUZP.js";import{c as s}from"/build/_shared/chunk-W5DRAD4K.js";var F=s(U(),1),r=s(L(),1),R=s(C(),1);var e=s(b(),1);function A(){let{toast:t}=x(),l=g(),a=v(),I=f(),[m,i]=(0,r.useState)(l?.data?.user_profile||null),[w,P]=(0,r.useState)(l?.data?.email||""),[T,u]=(0,r.useState)(m?.image_url),_=(0,r.useRef)(null);return(0,r.useEffect)(()=>{a?.error&&t({variant:"destructive",title:"Update Failed",description:a.error?.detail?.toString()||a.error?.toString()||"Could not update profile."}),a?.data&&(t({variant:"default",title:"Profile Updated",description:"Your profile has been updated successfully."}),i(a.data.user_profile||null),P(a.data.email||""),u(a.data.user_profile?.image_url))},[a]),{profile:m,email:w,imagePreview:T,fileInputRef:_,handleImageChange:D=>{let c=D.target.files?.[0];c&&u(URL.createObjectURL(c))}}}function y(){let{profile:t,email:l,imagePreview:a,fileInputRef:I,handleImageChange:m}=A(),i=!t&&!l;return(0,e.jsx)("div",{className:"min-h-screen text-gray-900 bg-secondary flex flex-col items-center pt-24 pb-16",children:(0,e.jsxs)("div",{className:"max-w-2xl w-full px-4 sm:px-6 lg:px-8",children:[(0,e.jsxs)("div",{className:"flex flex-col items-center mb-8",children:[(0,e.jsx)("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-indigo-200 mb-4",children:i?(0,e.jsx)("div",{className:"w-full h-full bg-gray-200 animate-pulse"}):a?(0,e.jsx)("img",{src:a,alt:"Profile",className:"w-full h-full object-cover"}):(0,e.jsx)(d,{src:o.avatarIcon,className:"w-full h-full"})}),i?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"h-8 w-40 bg-gray-200 rounded animate-pulse mb-2"}),(0,e.jsx)("div",{className:"h-5 w-56 bg-gray-200 rounded animate-pulse"})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:[t?.first_name," ",t?.last_name]}),(0,e.jsx)("p",{className:"text-lg text-gray-600",children:l})]})]}),i?(0,e.jsxs)("div",{className:"bg-white border rounded-3xl p-8 flex flex-col gap-6",children:[(0,e.jsx)("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),(0,e.jsx)("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),(0,e.jsx)("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),(0,e.jsx)("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),(0,e.jsx)("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),(0,e.jsx)("div",{className:"h-12 bg-gray-200 rounded animate-pulse"})]}):(0,e.jsxs)(p,{method:"POST",encType:"multipart/form-data",className:"bg-white border rounded-3xl p-8 flex flex-col gap-6",children:[(0,e.jsx)(n,{as:"input",id:"first_name",name:"first_name",labelText:"First Name",defaultValue:t?.first_name,icon:o.avatarIcon,required:!0}),(0,e.jsx)(n,{as:"input",id:"last_name",name:"last_name",labelText:"Last Name",defaultValue:t?.last_name,icon:o.avatarIcon,required:!0}),(0,e.jsx)(n,{as:"input",id:"email",name:"email",labelText:"Email",defaultValue:l,icon:o.avatarIcon,required:!0,readOnly:!0}),(0,e.jsx)(n,{as:"input",id:"status",name:"status",labelText:"Status",defaultValue:t?.status,icon:o.avatarIcon}),(0,e.jsxs)("label",{htmlFor:"image",className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,e.jsx)(d,{src:o.avatarIcon,className:"w-4 h-4"}),"Profile Image"]}),(0,e.jsx)(N,{name:"image",labelText:"Upload Image",multiple:!1,required:!1}),(0,e.jsx)(h,{element:"button",type:"submit",className:"rounded-lg p-3",children:"Update Profile"})]})]})})}export{y as default};
